function t(t){return t&&t.__esModule?t.default:t}var e;function o(t,e,n,r,i,a){if(i-r<=n)return;const l=r+i>>1;s(t,e,l,r,i,a%2),o(t,e,n,r,l-1,a+1),o(t,e,n,l+1,i,a+1)}function s(t,e,o,r,i,a){for(;i>r;){if(i-r>600){const n=i-r+1,l=o-r+1,c=Math.log(n),h=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*h*(n-h)/n)*(l-n/2<0?-1:1);s(t,e,o,Math.max(r,Math.floor(o-l*h/n+p)),Math.min(i,Math.floor(o+(n-l)*h/n+p)),a)}const l=e[2*o+a];let c=r,h=i;for(n(t,e,r,o),e[2*i+a]>l&&n(t,e,r,i);c<h;){for(n(t,e,c,h),c++,h--;e[2*c+a]<l;)c++;for(;e[2*h+a]>l;)h--}e[2*r+a]===l?n(t,e,r,h):(h++,n(t,e,h,i)),h<=o&&(r=h+1),o<=h&&(i=h-1)}}function n(t,e,o,s){r(t,o,s),r(e,2*o,2*s),r(e,2*o+1,2*s+1)}function r(t,e,o){const s=t[e];t[e]=t[o],t[o]=s}function i(t,e,o,s,n,r,i){const a=[0,t.length-1,0],l=[];let c,h;for(;a.length;){const p=a.pop(),u=a.pop(),m=a.pop();if(u-m<=i){for(let i=m;i<=u;i++)c=e[2*i],h=e[2*i+1],c>=o&&c<=n&&h>=s&&h<=r&&l.push(t[i]);continue}const g=Math.floor((m+u)/2);c=e[2*g],h=e[2*g+1],c>=o&&c<=n&&h>=s&&h<=r&&l.push(t[g]);const d=(p+1)%2;(0===p?o<=c:s<=h)&&(a.push(m),a.push(g-1),a.push(d)),(0===p?n>=c:r>=h)&&(a.push(g+1),a.push(u),a.push(d))}return l}function a(t,e,o,s,n,r){const i=[0,t.length-1,0],a=[],c=n*n;for(;i.length;){const h=i.pop(),p=i.pop(),u=i.pop();if(p-u<=r){for(let n=u;n<=p;n++)l(e[2*n],e[2*n+1],o,s)<=c&&a.push(t[n]);continue}const m=Math.floor((u+p)/2),g=e[2*m],d=e[2*m+1];l(g,d,o,s)<=c&&a.push(t[m]);const f=(h+1)%2;(0===h?o-n<=g:s-n<=d)&&(i.push(u),i.push(m-1),i.push(f)),(0===h?o+n>=g:s+n>=d)&&(i.push(m+1),i.push(p),i.push(f))}return a}function l(t,e,o,s){const n=t-o,r=e-s;return n*n+r*r}e=function t(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,n,r;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(n=s;0!=n--;)if(!t(e[n],o[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((s=(r=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(n=s;0!=n--;)if(!Object.prototype.hasOwnProperty.call(o,r[n]))return!1;for(n=s;0!=n--;){var i=r[n];if(!t(e[i],o[i]))return!1}return!0}return e!=e&&o!=o};const c=t=>t[0],h=t=>t[1];class p{range(t,e,o,s){return i(this.ids,this.coords,t,e,o,s,this.nodeSize)}within(t,e,o){return a(this.ids,this.coords,t,e,o,this.nodeSize)}constructor(t,e=c,s=h,n=64,r=Float64Array){this.nodeSize=n,this.points=t;const i=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new i(t.length),l=this.coords=new r(2*t.length);for(let o=0;o<t.length;o++)a[o]=o,l[2*o]=e(t[o]),l[2*o+1]=s(t[o]);o(a,l,n,0,a.length-1,0)}}const u={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},m=Math.fround||(g=new Float32Array(1),t=>(g[0]=+t,g[0]));var g;class d{load(t){const{log:e,minZoom:o,maxZoom:s,nodeSize:n}=this.options;e&&console.time("total time");const r=`prepare ${t.length} points`;e&&console.time(r),this.points=t;let i=[];for(let e=0;e<t.length;e++)t[e].geometry&&i.push(y(t[e],e));this.trees[s+1]=new p(i,v,P,n,Float32Array),e&&console.timeEnd(r);for(let t=s;t>=o;t--){const o=+Date.now();i=this._cluster(i,t),this.trees[t]=new p(i,v,P,n,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,i.length,+Date.now()-o)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let o=((t[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,t[1]));let n=180===t[2]?180:((t[2]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)o=-180,n=180;else if(o>n){const t=this.getClusters([o,s,180,r],e),i=this.getClusters([-180,s,n,r],e);return t.concat(i)}const i=this.trees[this._limitZoom(e)],a=i.range(M(o),w(r),M(n),w(s)),l=[];for(const t of a){const e=i.points[t];l.push(e.numPoints?k(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),o=this._getOriginZoom(t),s="No cluster with the specified id.",n=this.trees[o];if(!n)throw new Error(s);const r=n.points[e];if(!r)throw new Error(s);const i=this.options.radius/(this.options.extent*Math.pow(2,o-1)),a=n.within(r.x,r.y,i),l=[];for(const e of a){const o=n.points[e];o.parentId===t&&l.push(o.numPoints?k(o):this.points[o.index])}if(0===l.length)throw new Error(s);return l}getLeaves(t,e,o){e=e||10,o=o||0;const s=[];return this._appendLeaves(s,t,e,o,0),s}getTile(t,e,o){const s=this.trees[this._limitZoom(t)],n=Math.pow(2,t),{extent:r,radius:i}=this.options,a=i/r,l=(o-a)/n,c=(o+1+a)/n,h={features:[]};return this._addTileFeatures(s.range((e-a)/n,l,(e+1+a)/n,c),s.points,e,o,n,h),0===e&&this._addTileFeatures(s.range(1-a/n,l,1,c),s.points,n,o,n,h),e===n-1&&this._addTileFeatures(s.range(0,l,a/n,c),s.points,-1,o,n,h),h.features.length?h:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const o=this.getChildren(t);if(e++,1!==o.length)break;t=o[0].properties.cluster_id}return e}_appendLeaves(t,e,o,s,n){const r=this.getChildren(e);for(const e of r){const r=e.properties;if(r&&r.cluster?n+r.point_count<=s?n+=r.point_count:n=this._appendLeaves(t,r.cluster_id,o,s,n):n<s?n++:t.push(e),t.length===o)break}return n}_addTileFeatures(t,e,o,s,n,r){for(const i of t){const t=e[i],a=t.numPoints;let l,c,h;if(a)l=x(t),c=t.x,h=t.y;else{const e=this.points[t.index];l=e.properties,c=M(e.geometry.coordinates[0]),h=w(e.geometry.coordinates[1])}const p={type:1,geometry:[[Math.round(this.options.extent*(c*n-o)),Math.round(this.options.extent*(h*n-s))]],tags:l};let u;a?u=t.id:this.options.generateId?u=t.index:this.points[t.index].id&&(u=this.points[t.index].id),void 0!==u&&(p.id=u),r.features.push(p)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const o=[],{radius:s,extent:n,reduce:r,minPoints:i}=this.options,a=s/(n*Math.pow(2,e));for(let s=0;s<t.length;s++){const n=t[s];if(n.zoom<=e)continue;n.zoom=e;const l=this.trees[e+1],c=l.within(n.x,n.y,a),h=n.numPoints||1;let p=h;for(const t of c){const o=l.points[t];o.zoom>e&&(p+=o.numPoints||1)}if(p>h&&p>=i){let t=n.x*h,i=n.y*h,a=r&&h>1?this._map(n,!0):null;const u=(s<<5)+(e+1)+this.points.length;for(const o of c){const s=l.points[o];if(s.zoom<=e)continue;s.zoom=e;const c=s.numPoints||1;t+=s.x*c,i+=s.y*c,s.parentId=u,r&&(a||(a=this._map(n,!0)),r(a,this._map(s)))}n.parentId=u,o.push(f(t/p,i/p,u,p,a))}else if(o.push(n),p>1)for(const t of c){const s=l.points[t];s.zoom<=e||(s.zoom=e,o.push(s))}}return o}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?_({},t.properties):t.properties;const o=this.points[t.index].properties,s=this.options.map(o);return e&&s===o?_({},s):s}constructor(t){this.options=_(Object.create(u),t),this.trees=new Array(this.options.maxZoom+1)}}function f(t,e,o,s,n){return{x:m(t),y:m(e),zoom:1/0,id:o,parentId:-1,numPoints:s,properties:n}}function y(t,e){const[o,s]=t.geometry.coordinates;return{x:m(M(o)),y:m(w(s)),zoom:1/0,index:e,parentId:-1}}function k(t){return{type:"Feature",id:t.id,properties:x(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),C(t.y)]}};var e}function x(t){const e=t.numPoints,o=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return _(_({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:o})}function M(t){return t/360+.5}function w(t){const e=Math.sin(t*Math.PI/180),o=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return o<0?0:o>1?1:o}function C(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function _(t,e){for(const o in e)t[o]=e[o];return t}function v(t){return t.x}function P(t){return t.y}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function O(t,e){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(o[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(o[s[n]]=t[s[n]])}return o}class b{get bounds(){if(0!==this.markers.length||this._position)return this.markers.reduce(((t,e)=>t.extend(e.getPosition())),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((t=>t.getVisible())).length}push(t){this.markers.push(t)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}constructor({markers:t,position:e}){this.markers=t,e&&(e instanceof google.maps.LatLng?this._position=e:this._position=new google.maps.LatLng(e))}}class L{noop({markers:t}){return E(t)}constructor({maxZoom:t=16}){this.maxZoom=t}}const E=t=>t.map((t=>new b({position:t.getPosition(),markers:[t]})));class I extends L{calculate(o){let s=!1;if(!t(e)(o.markers,this.markers)){s=!0,this.markers=[...o.markers];const t=this.markers.map((t=>({type:"Feature",geometry:{type:"Point",coordinates:[t.getPosition().lng(),t.getPosition().lat()]},properties:{marker:t}})));this.superCluster.load(t)}const n={zoom:o.map.getZoom()};return s||this.state.zoom>this.maxZoom&&n.zoom>this.maxZoom||(s=s||!t(e)(this.state,n)),this.state=n,s&&(this.clusters=this.cluster(o)),{clusters:this.clusters,changed:s}}cluster({map:t}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[t,e]},properties:o}){if(o.cluster)return new b({markers:this.superCluster.getLeaves(o.cluster_id,1/0).map((t=>t.properties.marker)),position:new google.maps.LatLng({lat:e,lng:t})});{const t=o.marker;return new b({markers:[t],position:t.getPosition()})}}constructor(t){var{maxZoom:e,radius:o=60}=t,s=O(t,["maxZoom","radius"]);super({maxZoom:e}),this.superCluster=new d(Object.assign({maxZoom:this.maxZoom,radius:o},s)),this.state={zoom:null}}}class S{constructor(t,e){this.markers={sum:t.length};const o=e.map((t=>t.count)),s=o.reduce(((t,e)=>t+e),0);this.clusters={count:e.length,markers:{mean:s/e.length,sum:s,min:Math.min(...o),max:Math.max(...o)}}}}class Z{render({count:t,position:e},o){const s=t>Math.max(10,o.clusters.markers.mean)?"#ff0000":"#0000ff",n=window.btoa(`\n  <svg fill="${s}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>`);return new google.maps.Marker({position:e,icon:{url:`data:image/svg+xml;base64,${n}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(t),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${t} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+t})}}class z{constructor(){!function(t,e){for(let o in e.prototype)t.prototype[o]=e.prototype[o]}(z,google.maps.OverlayView)}}var T,A;(A=T||(T={})).CLUSTERING_BEGIN="clusteringbegin",A.CLUSTERING_END="clusteringend",A.CLUSTER_CLICK="click";const j=(t,e,o)=>{o.fitBounds(e.bounds)};class N extends z{addMarker(t,e){this.markers.includes(t)||(this.markers.push(t),e||this.render())}addMarkers(t,e){t.forEach((t=>{this.addMarker(t,!0)})),e||this.render()}removeMarker(t,e){const o=this.markers.indexOf(t);return-1!==o&&(t.setMap(null),this.markers.splice(o,1),e||this.render(),!0)}removeMarkers(t,e){let o=!1;return t.forEach((t=>{o=this.removeMarker(t,!0)||o})),o&&!e&&this.render(),o}clearMarkers(t){this.markers.length=0,t||this.render()}render(){const t=this.getMap();if(t instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,T.CLUSTERING_BEGIN,this);const{clusters:e,changed:o}=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()});(o||null==o)&&(this.reset(),this.clusters=e,this.renderClusters()),google.maps.event.trigger(this,T.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((t=>t.setMap(null))),this.clusters.forEach((t=>t.delete())),this.clusters=[]}renderClusters(){const t=new S(this.markers,this.clusters),e=this.getMap();this.clusters.forEach((o=>{1===o.markers.length?o.marker=o.markers[0]:(o.marker=this.renderer.render(o,t),this.onClusterClick&&o.marker.addListener("click",(t=>{google.maps.event.trigger(this,T.CLUSTER_CLICK,o),this.onClusterClick(t,o,e)}))),o.marker.setMap(e)}))}constructor({map:t,markers:e=[],algorithm:o=new I({}),renderer:s=new Z,onClusterClick:n=j}){super(),this.markers=[...e],this.clusters=[],this.algorithm=o,this.renderer=s,this.onClusterClick=n,t&&this.setMap(t)}}var F={};Object.defineProperty(F,"__esModule",{value:!0}),F.default=function(t,e,o){e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o;return t};const R=[{id:1,lat:50.3864813,lng:30.4610184},{id:2,lat:50.3893584,lng:30.4744418},{id:3,lat:50.3766632,lng:30.4545341},{id:4,lat:50.3871685,lng:30.4633948},{id:5,lat:50.3839428,lng:30.4448406},{id:6,lat:50.3950753,lng:30.5020464},{id:7,lat:50.3932314,lng:30.4851096},{id:8,lat:50.3932962,lng:30.4808875},{id:9,lat:50.3850642,lng:30.4800686},{id:10,lat:50.3852944,lng:30.4568793},{id:11,lat:50.383335,lng:30.4582703}],B=[{id:1,title:"Вільямса, 9",image:"",description:""},{id:2,title:"Ломоносова, 38",image:"",description:""},{id:3,title:"Касьяна, 20",image:"",description:""},{id:4,title:"Мейтуса, 10",image:"",description:""},{id:5,title:"Луценка, 11",image:"",description:""},{id:6,title:"Васильківська, 11",image:"",description:""},{id:7,title:"Васильківська, 34",image:"",description:""},{id:8,title:"Максимовича, 4",image:"",description:""},{id:9,title:"Васильківська, 53",image:"",description:""},{id:10,title:"Вільямса, 11",image:"",description:""},{id:11,title:"Конєва, 10",image:"",description:""}];const U=new class{constructor(){t(F)(this,"getAllPoints",(()=>R)),t(F)(this,"getAllAppartments",(()=>B))}};console.log(U.getAllPoints()),console.log(U.getAllAppartments());const G=U.getAllPoints();window.initMap=function(){const t=new google.maps.Map(document.getElementById("map"),{zoom:16,center:{lat:-28.024,lng:140.887},mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},fullscreenControl:!0});t.addListener("click",(t=>{console.log(t.latLng.toJSON())})),t.addListener("bounds_changed",(()=>{console.log(t.getBounds().toJSON())}));const e=new google.maps.InfoWindow,o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=G.map(((s,n)=>{const r=o[n%o.length],i=new google.maps.Marker({position:s,label:r});return i.addListener("click",(()=>{e.setContent(r),e.open(t,i),console.log("CLICK!!!")})),i}));new N({markers:s,map:t});var n={query:"Київ Конєва, 10",fields:["name","geometry"]};function r(o){if(!o.geometry||!o.geometry.location)return;const s=new google.maps.Marker({map:t,position:o.geometry.location});google.maps.event.addListener(s,"click",(s=>{console.log(s.latLng.toJSON()),console.log(o.name),e.setContent(o.name||""),e.open(t)}))}new google.maps.places.PlacesService(t).findPlaceFromQuery(n,(function(e,o){if(o===google.maps.places.PlacesServiceStatus.OK){for(var s=0;s<e.length;s++)r(e[s]);t.setCenter(e[0].geometry.location)}}))};
//# sourceMappingURL=index.9d0db836.js.map
