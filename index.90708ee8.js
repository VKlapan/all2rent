!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},n=t.parcelRequired7c6;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},t.parcelRequired7c6=n),n.register("gD1JV",(function(e,t){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return r(e,t)}})),n.register("8slrw",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return e}})),n.register("7AJDX",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),n.register("ifqQW",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),n.register("auk6i",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return i.default(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i.default(e,t)};var r,i=(r=n("8NIkP"))&&r.__esModule?r:{default:r}})),n.register("8NIkP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}})),n.register("kMC0W",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return i.default(e)};var r,i=(r=n("8NIkP"))&&r.__esModule?r:{default:r}})),n.register("8CtQK",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),n.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),n.register("fVNic",(function(e,t){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return r(e)}})),n.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==i.default(t)&&"function"!=typeof t?r.default(e):t};var r=o(n("ds8z5")),i=o(n("l5bVx"));function o(e){return e&&e.__esModule?e:{default:e}}})),n.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),n.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}}));var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var s={};function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e,t,r){t&&a(e.prototype,t);r&&a(e,r);return e};var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c.default(e,t)};var l,c=(l=n("gD1JV"))&&l.__esModule?l:{default:l};var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(e,t){return d.default(e)||f.default(e,t)||h.default(e,t)||m.default()};var d=g(n("8slrw")),f=g(n("7AJDX")),m=g(n("ifqQW")),h=g(n("auk6i"));function g(e){return e&&e.__esModule?e:{default:e}}var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.default=function(e){return y.default(e)||_.default(e)||x.default(e)||b.default()};var y=k(n("kMC0W")),_=k(n("7AJDX")),b=k(n("8CtQK")),x=k(n("auk6i"));function k(e){return e&&e.__esModule?e:{default:e}}var w={};Object.defineProperty(w,"__esModule",{value:!0}),w.default=function(e){var t=M.default();return function(){var r,i=P.default(e);if(t){var n=P.default(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return O.default(this,r)}};var M=S(n("aTHs7")),P=S(n("fVNic")),O=S(n("jmhxu"));function S(e){return e&&e.__esModule?e:{default:e}}var E;function j(e,t,r,i,n,o){if(!(n-i<=r)){var s=i+n>>1;C(e,t,s,i,n,o%2),j(e,t,r,i,s-1,o+1),j(e,t,r,s+1,n,o+1)}}function C(e,t,r,i,n,o){for(;n>i;){if(n-i>600){var s=n-i+1,a=r-i+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);C(e,t,r,Math.max(i,Math.floor(r-a*l/s+c)),Math.min(n,Math.floor(r+(s-a)*l/s+c)),o)}var p=t[2*r+o],d=i,f=n;for(L(e,t,i,r),t[2*n+o]>p&&L(e,t,i,n);d<f;){for(L(e,t,d,f),d++,f--;t[2*d+o]<p;)d++;for(;t[2*f+o]>p;)f--}t[2*i+o]===p?L(e,t,i,f):L(e,t,++f,n),f<=r&&(i=f+1),r<=f&&(n=f-1)}}function L(e,t,r,i){q(e,r,i),q(t,2*r,2*i),q(t,2*r+1,2*i+1)}function q(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function I(e,t,r,i,n,o,s){for(var a,u,l=[0,e.length-1,0],c=[];l.length;){var p=l.pop(),d=l.pop(),f=l.pop();if(d-f<=s)for(var m=f;m<=d;m++)a=t[2*m],u=t[2*m+1],a>=r&&a<=n&&u>=i&&u<=o&&c.push(e[m]);else{var h=Math.floor((f+d)/2);a=t[2*h],u=t[2*h+1],a>=r&&a<=n&&u>=i&&u<=o&&c.push(e[h]);var g=(p+1)%2;(0===p?r<=a:i<=u)&&(l.push(f),l.push(h-1),l.push(g)),(0===p?n>=a:o>=u)&&(l.push(h+1),l.push(d),l.push(g))}}return c}function A(e,t,r,i,n,o){for(var s=[0,e.length-1,0],a=[],u=n*n;s.length;){var l=s.pop(),c=s.pop(),p=s.pop();if(c-p<=o)for(var d=p;d<=c;d++)T(t[2*d],t[2*d+1],r,i)<=u&&a.push(e[d]);else{var f=Math.floor((p+c)/2),m=t[2*f],h=t[2*f+1];T(m,h,r,i)<=u&&a.push(e[f]);var g=(l+1)%2;(0===l?r-n<=m:i-n<=h)&&(s.push(p),s.push(f-1),s.push(g)),(0===l?r+n>=m:i+n>=h)&&(s.push(f+1),s.push(c),s.push(g))}}return a}function T(e,t,r,i){var n=e-r,o=t-i;return n*n+o*o}E=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;0!=n--;){var s=o[n];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r};var z,Z=function(e){return e[0]},N=function(e){return e[1]},F=function(){"use strict";function t(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;e(o)(this,t),this.nodeSize=s,this.points=r;for(var u=r.length<65536?Uint16Array:Uint32Array,l=this.ids=new u(r.length),c=this.coords=new a(2*r.length),p=0;p<r.length;p++)l[p]=p,c[2*p]=i(r[p]),c[2*p+1]=n(r[p]);j(l,c,s,0,l.length-1,0)}return e(s)(t,[{key:"range",value:function(e,t,r,i){return I(this.ids,this.coords,e,t,r,i,this.nodeSize)}},{key:"within",value:function(e,t,r){return A(this.ids,this.coords,e,t,r,this.nodeSize)}}]),t}(),R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},G=Math.fround||(z=new Float32Array(1),function(e){return z[0]=+e,z[0]}),D=function(){"use strict";function t(r){e(o)(this,t),this.options=H(Object.create(R),r),this.trees=new Array(this.options.maxZoom+1)}return e(s)(t,[{key:"load",value:function(t){var r=this.options,i=r.log,n=r.minZoom,o=r.maxZoom,s=r.nodeSize;i&&console.time("total time");var a="prepare ".concat(t.length," points");i&&console.time(a),this.points=t;for(var u,l,c,d,f,m=[],h=0;h<t.length;h++)t[h].geometry&&m.push((u=t[h],l=h,c=void 0,d=void 0,f=void 0,c=e(p)(u.geometry.coordinates,2),d=c[0],f=c[1],{x:G(J(d)),y:G(K(f)),zoom:1/0,index:l,parentId:-1}));this.trees[o+1]=new F(m,Q,X,s,Float32Array),i&&console.timeEnd(a);for(var g=o;g>=n;g--){var v=+Date.now();m=this._cluster(m,g),this.trees[g]=new F(m,Q,X,s,Float32Array),i&&console.log("z%d: %d clusters in %dms",g,m.length,+Date.now()-v)}return i&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),n=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,n=180;else if(r>n){var s=this.getClusters([r,i,180,o],t),a=this.getClusters([-180,i,n,o],t);return s.concat(a)}var u=this.trees[this._limitZoom(t)],l=u.range(J(r),K(o),J(n),K(i)),c=[],p=!0,d=!1,f=void 0;try{for(var m,h=l[Symbol.iterator]();!(p=(m=h.next()).done);p=!0){var g=m.value,v=u.points[g];c.push(v.numPoints?V(v):this.points[v.index])}}catch(e){d=!0,f=e}finally{try{p||null==h.return||h.return()}finally{if(d)throw f}}return c}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(i);var o=n.points[t];if(!o)throw new Error(i);var s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),a=n.within(o.x,o.y,s),u=[],l=!0,c=!1,p=void 0;try{for(var d,f=a[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var m=d.value,h=n.points[m];h.parentId===e&&u.push(h.numPoints?V(h):this.points[h.index])}}catch(e){c=!0,p=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw p}}if(0===u.length)throw new Error(i);return u}},{key:"getLeaves",value:function(e,t,r){t=t||10,r=r||0;var i=[];return this._appendLeaves(i,e,t,r,0),i}},{key:"getTile",value:function(e,t,r){var i=this.trees[this._limitZoom(e)],n=Math.pow(2,e),o=this.options,s=o.extent,a=o.radius/s,u=(r-a)/n,l=(r+1+a)/n,c={features:[]};return this._addTileFeatures(i.range((t-a)/n,u,(t+1+a)/n,l),i.points,t,r,n,c),0===t&&this._addTileFeatures(i.range(1-a/n,u,1,l),i.points,n,r,n,c),t===n-1&&this._addTileFeatures(i.range(0,u,a/n,l),i.points,-1,r,n,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,r,i,n){var o=this.getChildren(t),s=!0,a=!1,u=void 0;try{for(var l,c=o[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var p=l.value,d=p.properties;if(d&&d.cluster?n+d.point_count<=i?n+=d.point_count:n=this._appendLeaves(e,d.cluster_id,r,i,n):n<i?n++:e.push(p),e.length===r)break}}catch(e){a=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(a)throw u}}return n}},{key:"_addTileFeatures",value:function(e,t,r,i,n,o){var s=!0,a=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var p=t[l.value],d=p.numPoints,f=void 0,m=void 0,h=void 0;if(d)f=U(p),m=p.x,h=p.y;else{var g=this.points[p.index];f=g.properties,m=J(g.geometry.coordinates[0]),h=K(g.geometry.coordinates[1])}var v={type:1,geometry:[[Math.round(this.options.extent*(m*n-r)),Math.round(this.options.extent*(h*n-i))]],tags:f},y=void 0;d?y=p.id:this.options.generateId?y=p.index:this.points[p.index].id&&(y=this.points[p.index].id),void 0!==y&&(v.id=y),o.features.push(v)}}catch(e){a=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(a)throw u}}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var r=[],i=this.options,n=i.radius,o=i.extent,s=i.reduce,a=i.minPoints,u=n/(o*Math.pow(2,t)),l=0;l<e.length;l++){var c=e[l];if(!(c.zoom<=t)){c.zoom=t;var p=this.trees[t+1],d=p.within(c.x,c.y,u),f=c.numPoints||1,m=f,h=!0,g=!1,v=void 0;try{for(var y,_=d[Symbol.iterator]();!(h=(y=_.next()).done);h=!0){var b=y.value,x=p.points[b];x.zoom>t&&(m+=x.numPoints||1)}}catch(e){g=!0,v=e}finally{try{h||null==_.return||_.return()}finally{if(g)throw v}}if(m>f&&m>=a){var k=c.x*f,w=c.y*f,M=s&&f>1?this._map(c,!0):null,P=(l<<5)+(t+1)+this.points.length,O=!0,S=!1,E=void 0;try{for(var j,C=d[Symbol.iterator]();!(O=(j=C.next()).done);O=!0){var L=j.value,q=p.points[L];if(!(q.zoom<=t)){q.zoom=t;var I=q.numPoints||1;k+=q.x*I,w+=q.y*I,q.parentId=P,s&&(M||(M=this._map(c,!0)),s(M,this._map(q)))}}}catch(e){S=!0,E=e}finally{try{O||null==C.return||C.return()}finally{if(S)throw E}}c.parentId=P,r.push(B(k/m,w/m,P,m,M))}else{r.push(c);var A=!0,T=!1,z=void 0;if(m>1)try{for(var Z,N=d[Symbol.iterator]();!(A=(Z=N.next()).done);A=!0){var F=Z.value,R=p.points[F];R.zoom<=t||(R.zoom=t,r.push(R))}}catch(e){T=!0,z=e}finally{try{A||null==N.return||N.return()}finally{if(T)throw z}}}}}return r}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?H({},e.properties):e.properties;var r=this.points[e.index].properties,i=this.options.map(r);return t&&i===r?H({},i):i}}]),t}();function B(e,t,r,i,n){return{x:G(e),y:G(t),zoom:1/0,id:r,parentId:-1,numPoints:i,properties:n}}function V(e){return{type:"Feature",id:e.id,properties:U(e),geometry:{type:"Point",coordinates:[(i=e.x,360*(i-.5)),(t=e.y,r=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var t,r,i}function U(e){var t=e.numPoints,r=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?"".concat(Math.round(t/100)/10,"k"):t;return H(H({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:r})}function J(e){return e/360+.5}function K(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function H(e,t){for(var r in t)e[r]=t[r];return e}function Q(e){return e.x}function X(e){return e.y}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function W(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}var $=function(){"use strict";function t(r){var i=r.markers,n=r.position;e(o)(this,t),this.markers=i,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}return e(s)(t,[{key:"bounds",get:function(){if(0!==this.markers.length||this._position)return this.markers.reduce((function(e,t){return e.extend(t.getPosition())}),new google.maps.LatLngBounds(this._position,this._position))}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter((function(e){return e.getVisible()})).length}},{key:"push",value:function(e){this.markers.push(e)}},{key:"delete",value:function(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}]),t}(),Y=function(){"use strict";function t(r){var i=r.maxZoom,n=void 0===i?16:i;e(o)(this,t),this.maxZoom=n}return e(s)(t,[{key:"noop",value:function(e){var t=e.markers;return ee(t)}}]),t}(),ee=function(e){return e.map((function(e){return new $({position:e.getPosition(),markers:[e]})}))},te=function(t){"use strict";e(u)(i,t);var r=e(w)(i);function i(t){var n;e(o)(this,i);var s=t.maxZoom,a=t.radius,u=void 0===a?60:a,l=W(t,["maxZoom","radius"]);return(n=r.call(this,{maxZoom:s})).superCluster=new D(Object.assign({maxZoom:n.maxZoom,radius:u},l)),n.state={zoom:null},n}return e(s)(i,[{key:"calculate",value:function(t){var r=!1;if(!e(E)(t.markers,this.markers)){r=!0,this.markers=e(v)(t.markers);var i=this.markers.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.getPosition().lng(),e.getPosition().lat()]},properties:{marker:e}}}));this.superCluster.load(i)}var n={zoom:t.map.getZoom()};return r||this.state.zoom>this.maxZoom&&n.zoom>this.maxZoom||(r=r||!e(E)(this.state,n)),this.state=n,r&&(this.clusters=this.cluster(t)),{clusters:this.clusters,changed:r}}},{key:"cluster",value:function(e){var t=e.map;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}},{key:"transformCluster",value:function(t){var r=t.geometry,i=e(p)(r.coordinates,2),n=i[0],o=i[1],s=t.properties;if(s.cluster)return new $({markers:this.superCluster.getLeaves(s.cluster_id,1/0).map((function(e){return e.properties.marker})),position:new google.maps.LatLng({lat:o,lng:n})});var a=s.marker;return new $({markers:[a],position:a.getPosition()})}}]),i}(Y),re=function t(r,i){"use strict";var n,s;e(o)(this,t),this.markers={sum:r.length};var a=i.map((function(e){return e.count})),u=a.reduce((function(e,t){return e+t}),0);this.clusters={count:i.length,markers:{mean:u/i.length,sum:u,min:(n=Math).min.apply(n,e(v)(a)),max:(s=Math).max.apply(s,e(v)(a))}}},ie=function(){"use strict";function t(){e(o)(this,t)}return e(s)(t,[{key:"render",value:function(e,t){var r=e.count,i=e.position,n=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",o=window.btoa('\n  <svg fill="'.concat(n,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>'));return new google.maps.Marker({position:i,icon:{url:"data:image/svg+xml;base64,".concat(o),scaledSize:new google.maps.Size(45,45)},label:{text:String(r),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:"Cluster of ".concat(r," markers"),zIndex:Number(google.maps.Marker.MAX_ZINDEX)+r})}}]),t}();var ne,oe,se=function t(){"use strict";e(o)(this,t),function(e,t){for(var r in t.prototype)e.prototype[r]=t.prototype[r]}(t,google.maps.OverlayView)};(oe=ne||(ne={})).CLUSTERING_BEGIN="clusteringbegin",oe.CLUSTERING_END="clusteringend",oe.CLUSTER_CLICK="click";var ae=function(e,t,r){r.fitBounds(t.bounds)},ue=function(t){"use strict";e(u)(i,t);var r=e(w)(i);function i(t){var n,s=t.map,a=t.markers,u=void 0===a?[]:a,l=t.algorithm,c=void 0===l?new te({}):l,p=t.renderer,d=void 0===p?new ie:p,f=t.onClusterClick,m=void 0===f?ae:f;return e(o)(this,i),(n=r.call(this)).markers=e(v)(u),n.clusters=[],n.algorithm=c,n.renderer=d,n.onClusterClick=m,s&&n.setMap(s),n}return e(s)(i,[{key:"addMarker",value:function(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}},{key:"addMarkers",value:function(e,t){var r=this;e.forEach((function(e){r.addMarker(e,!0)})),t||this.render()}},{key:"removeMarker",value:function(e,t){var r=this.markers.indexOf(e);return-1!==r&&(e.setMap(null),this.markers.splice(r,1),t||this.render(),!0)}},{key:"removeMarkers",value:function(e,t){var r=this,i=!1;return e.forEach((function(e){i=r.removeMarker(e,!0)||i})),i&&!t&&this.render(),i}},{key:"clearMarkers",value:function(e){this.markers.length=0,e||this.render()}},{key:"render",value:function(){var e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,ne.CLUSTERING_BEGIN,this);var t=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()}),r=t.clusters,i=t.changed;(i||null==i)&&(this.reset(),this.clusters=r,this.renderClusters()),google.maps.event.trigger(this,ne.CLUSTERING_END,this)}}},{key:"onAdd",value:function(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach((function(e){return e.setMap(null)})),this.clusters.forEach((function(e){return e.delete()})),this.clusters=[]}},{key:"renderClusters",value:function(){var e=this,t=new re(this.markers,this.clusters),r=this.getMap();this.clusters.forEach((function(i){if(1===i.markers.length)i.marker=i.markers[0];else{var n=e;i.marker=e.renderer.render(i,t),e.onClusterClick&&i.marker.addListener("click",(function(e){google.maps.event.trigger(n,ne.CLUSTER_CLICK,i),n.onClusterClick(e,i,r)}))}i.marker.setMap(r)}))}}]),i}(se),le={};Object.defineProperty(le,"__esModule",{value:!0}),le.default=function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e};var ce=[{id:1,lat:50.3864813,lng:30.4610184},{id:2,lat:50.3893584,lng:30.4744418},{id:3,lat:50.3766632,lng:30.4545341},{id:4,lat:50.3871685,lng:30.4633948},{id:5,lat:50.3839428,lng:30.4448406},{id:6,lat:50.3950753,lng:30.5020464},{id:7,lat:50.3932314,lng:30.4851096},{id:8,lat:50.3932962,lng:30.4808875},{id:9,lat:50.3850642,lng:30.4800686},{id:10,lat:50.3852944,lng:30.4568793},{id:11,lat:50.383335,lng:30.4582703}],pe=[{id:1,title:"Вільямса, 9",image:"https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:2,title:"Ломоносова, 38",image:"https://images.pexels.com/photos/1643383/pexels-photo-1643383.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:3,title:"Касьяна, 20",image:"https://images.pexels.com/photos/667838/pexels-photo-667838.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:4,title:"Мейтуса, 10",image:"https://images.pexels.com/photos/245208/pexels-photo-245208.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:5,title:"Луценка, 11",image:"https://images.pexels.com/photos/259962/pexels-photo-259962.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:6,title:"Васильківська, 11",image:"https://images.pexels.com/photos/439227/pexels-photo-439227.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:7,title:"Васильківська, 34",image:"https://images.pexels.com/photos/1669799/pexels-photo-1669799.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:8,title:"Максимовича, 4",image:"https://images.pexels.com/photos/1571459/pexels-photo-1571459.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:9,title:"Васильківська, 53",image:"https://images.pexels.com/photos/1648771/pexels-photo-1648771.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:10,title:"Вільямса, 11",image:"https://images.pexels.com/photos/271743/pexels-photo-271743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"},{id:11,title:"Конєва, 10",image:"https://images.pexels.com/photos/265004/pexels-photo-265004.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",description:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?"}],de=function t(){"use strict";var r=this;e(o)(this,t),e(le)(this,"findStatus",null),e(le)(this,"setFindStatus",(function(e){r.findStatus=e})),e(le)(this,"getFindStatus",(function(){return r.findStatus})),e(le)(this,"getAllPoints",(function(){return ce})),e(le)(this,"getAllAppartments",(function(){return pe})),e(le)(this,"getAppartmentById",(function(e){return pe[pe.findIndex((function(t){return t.id===e}))]})),e(le)(this,"getAppartmentsByIdArr",(function(e){return pe.filter((function(t){return e.includes(t.id)}))})),e(le)(this,"getVisiblePointsId",(function(e){return ce.filter(me(e)).map(fe)}))},fe=function(e){return e.id},me=function(e){var t=e.south,r=e.north,i=e.west,n=e.east;return function(e){var o=e.lat,s=e.lng;return s>i&&s<n&&o>t&&o<r}};function he(e){var t=new google.maps.Map(e,{zoom:16,center:{lat:50.3864813,lng:30.4610184},mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_CENTER},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},fullscreenControl:!0}),r=[];t.addListener("bounds_changed",(function(){for(var e=0;e<r.length;e++)"bounds_changed"===r[e].eventName&&r[e].listener(t.getBounds().toJSON())}));return{addPoints:function(e){var r=e.map((function(e){var r=e.id,i=e.lat,n=e.lng,o=r.toString(),s=new google.maps.Marker({position:{lat:i,lng:n},label:o});return s.addListener("click",(function(e){console.log("CLICK!!!",s.label,t.zoom),t.setZoom(18),t.setCenter(s.position)})),s}));new ue({markers:r,map:t})},findNewPoints:function(e){return new Promise((function(r,i){function n(e){if(e.geometry&&e.geometry.location)new google.maps.Marker({map:t,position:e.geometry.location})}new google.maps.places.PlacesService(t).findPlaceFromQuery(e,(function(e,o){if(o===google.maps.places.PlacesServiceStatus.OK){for(var s=0;s<e.length;s++)n(e[s]);t.setCenter(e[0].geometry.location),r(o)}else i(o)}))}))},zoomTo:function(){},addEventListener:function(e,t){r.push({eventName:e,listener:t})},removeEventListener:function(e,t){}}}var ge=function t(r){"use strict";var i=this;e(o)(this,t),e(le)(this,"itemsGalleryEl",""),e(le)(this,"renderItemsGallery",(function(e){return e.map((function(e){return'\n    <li class="item" data-id="'.concat(e.id,'">\n    <img class="item--img" src="').concat(e.image,'" alt="" />\n    <div class="item--details">\n      <h3 class="item--title">').concat(e.title,'</h3>\n      <p class="item--description">').concat(e.description,"</p>\n    </div>\n  </li>\n    ")})).join("")})),e(le)(this,"showAppartments",(function(e){i.itemsGalleryEl.innerHTML=i.renderItemsGallery(e)})),e(le)(this,"hideGallery",(function(){i.itemsGalleryEl.classList.add("invisible")})),e(le)(this,"openGallery",(function(){i.itemsGalleryEl.classList.remove("invisible")})),this.itemsGalleryEl=document.querySelector(r)},ve=function t(r){"use strict";var i=this;e(o)(this,t),e(le)(this,"rootEl",""),e(le)(this,"ref",{inputAddress:"",inputImageLink:"",inputDescripton:""}),e(le)(this,"renderFormToAddNewAppartment",(function(e){var t=i;i.rootEl.innerHTML='\n<div class="form__wrap">\n  <h3 class="form__title">Додайте новий об\'єкт</h3>\n  <form class="form__body">\n    <label class="form__label">\n      <span class="form__text">Адреса</span>\n      <input class="form__field" type="text" name="title" placeholder="назва вулиці, № будинку" />\n    </label>\n\n    <label class="form__label">\n      <span class="form__text invisible">Посилання на фото</span>\n      <input class="form__field invisible" type="text" name="image" placeholder="" />\n    </label>\n\n    <label class="form__label ">\n      <span class="form__text invisible">Опис</span>\n      <textarea\n        class="form__field form__field--textarea invisible"\n        name="description"\n        placeholder=" "\n        cols="30"\n        rows="10"\n      ></textarea>\n    </label>\n    <button class="form__button " type="submit">Знайти адресу</button>\n    <button class="form__button--save invisible" type="submit">Додати</button>\n    <div class=\'form__error\'>\n    <p class=\'error__text--not-found invisible\'>Об\'єкт не знайдено. Спробуйте ще</p>\n    <p class=\'error__text--empty-fields invisible\'>Заповніть всі поля</p>\n    </div>\n\n  </form>\n</div>\n',i.ref.inputAddress=i.rootEl.querySelector('input[name="title"]'),i.ref.inputImageLink=i.rootEl.querySelector('input[name="image"]'),i.ref.inputDescripton=i.rootEl.querySelector('input[name="description"]'),i.ref.inputAddress.addEventListener("focus",(function(){t.ref.inputAddress.value="",t.hideErrorSearch()})),i.rootEl.querySelector(".form__body").addEventListener("submit",(function(t){t.preventDefault();var r=t.currentTarget.elements.title.value,i=t.currentTarget.elements.image.value,n=t.currentTarget.elements.description.value;e({title:r,image:i,description:n})}))})),e(le)(this,"hideForm",(function(){i.rootEl.classList.add("invisible")})),e(le)(this,"openForm",(function(){i.rootEl.classList.remove("invisible")})),e(le)(this,"hideErrorSearch",(function(){i.rootEl.querySelector(".error__text--not-found").classList.add("invisible")})),e(le)(this,"showErrorSearch",(function(){i.rootEl.querySelector(".error__text--not-found").classList.remove("invisible")})),this.rootEl=document.querySelector(r),this.hideForm()};window.main=function(){var e=new de,t=he(document.getElementById("map")),r=new ge(".item--list"),i=new ve(".form-block"),n=document.querySelector(".header--btn");n.addEventListener("click",i.openForm),n.addEventListener("click",r.hideGallery),t.addPoints(e.getAllPoints()),t.addEventListener("bounds_changed",(function(t){var i=e.getVisiblePointsId(t);r.showAppartments(e.getAppartmentsByIdArr(i))})),i.renderFormToAddNewAppartment((function(e){console.log(e);t.findNewPoints({fields:["name","geometry"],query:e.title}).then(console.log).catch(i.showErrorSearch)}))}}();
//# sourceMappingURL=index.90708ee8.js.map
