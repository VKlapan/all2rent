{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_set_prototype_of.js","node_modules/@swc/helpers/lib/_array_with_holes.js","node_modules/@swc/helpers/lib/_iterable_to_array.js","node_modules/@swc/helpers/lib/_non_iterable_rest.js","node_modules/@swc/helpers/lib/_unsupported_iterable_to_array.js","node_modules/@swc/helpers/lib/_array_like_to_array.js","node_modules/@swc/helpers/lib/_array_without_holes.js","node_modules/@swc/helpers/lib/_non_iterable_spread.js","node_modules/@swc/helpers/lib/_is_native_reflect_construct.js","node_modules/@swc/helpers/lib/_get_prototype_of.js","node_modules/@swc/helpers/lib/_possible_constructor_return.js","node_modules/@swc/helpers/lib/_assert_this_initialized.js","node_modules/@swc/helpers/lib/_type_of.js","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_define_property.js","src/js/points.js","src/js/modelObjectsHandler.js","node_modules/@swc/helpers/lib/_create_class.js","node_modules/@swc/helpers/lib/_inherits.js","node_modules/@swc/helpers/lib/_sliced_to_array.js","node_modules/@swc/helpers/lib/_to_consumable_array.js","node_modules/@swc/helpers/lib/_create_super.js","node_modules/kdbush/src/sort.js","node_modules/kdbush/src/range.js","node_modules/kdbush/src/within.js","node_modules/fast-deep-equal/index.js","node_modules/kdbush/src/index.js","node_modules/supercluster/index.js","<<jsx-config-pragma.js>>","node_modules/@googlemaps/markerclusterer/src/cluster.ts","node_modules/@googlemaps/markerclusterer/src/algorithms/core.ts","node_modules/@googlemaps/markerclusterer/src/algorithms/supercluster.ts","node_modules/@googlemaps/markerclusterer/src/renderer.ts","node_modules/@googlemaps/markerclusterer/src/overlay-view-safe.ts","node_modules/@googlemaps/markerclusterer/src/markerclusterer.ts","src/js/createMap.js","src/js/createGallery.js","src/js/createForm.js","src/js/app.js","src/js/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _setPrototypeOf;\nfunction _setPrototypeOf(o, p) {\n    return setPrototypeOf(o, p);\n}\nfunction setPrototypeOf(o1, p1) {\n    setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n    };\n    return setPrototypeOf(o1, p1);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _arrayWithHoles;\nfunction _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _iterableToArray;\nfunction _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _nonIterableRest;\nfunction _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _unsupportedIterableToArray;\nvar _arrayLikeToArray = _interopRequireDefault(require(\"./_array_like_to_array\"));\nfunction _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return (0, _arrayLikeToArray).default(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(n);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return (0, _arrayLikeToArray).default(o, minLen);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _arrayLikeToArray;\nfunction _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];\n    return arr2;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _arrayWithoutHoles;\nvar _arrayLikeToArray = _interopRequireDefault(require(\"./_array_like_to_array\"));\nfunction _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return (0, _arrayLikeToArray).default(arr);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _nonIterableSpread;\nfunction _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _isNativeReflectConstruct;\nfunction _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {}));\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _getPrototypeOf;\nfunction _getPrototypeOf(o) {\n    return getPrototypeOf(o);\n}\nfunction getPrototypeOf(o1) {\n    getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n        return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return getPrototypeOf(o1);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _possibleConstructorReturn;\nvar _assertThisInitialized = _interopRequireDefault(require(\"./_assert_this_initialized\"));\nvar _typeOf = _interopRequireDefault(require(\"./_type_of\"));\nfunction _possibleConstructorReturn(self, call) {\n    if (call && ((0, _typeOf).default(call) === \"object\" || typeof call === \"function\")) {\n        return call;\n    }\n    return (0, _assertThisInitialized).default(self);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _assertThisInitialized;\nfunction _assertThisInitialized(self) {\n    if (self === void 0) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n    return self;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _typeof;\nfunction _typeof(obj) {\n    \"@swc/helpers - typeof\";\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n}\n;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","const points = [\n  { id: 1, lat: 50.3864813, lng: 30.4610184 },\n  { id: 2, lat: 50.3893584, lng: 30.4744418 },\n  { id: 3, lat: 50.3766632, lng: 30.4545341 },\n  { id: 4, lat: 50.3871685, lng: 30.4633948 },\n  { id: 5, lat: 50.3839428, lng: 30.4448406 },\n  { id: 6, lat: 50.3950753, lng: 30.5020464 },\n  { id: 7, lat: 50.3932314, lng: 30.4851096 },\n  { id: 8, lat: 50.3932962, lng: 30.4808875 },\n  { id: 9, lat: 50.3850642, lng: 30.4800686 },\n  { id: 10, lat: 50.3852944, lng: 30.4568793 },\n  { id: 11, lat: 50.383335, lng: 30.4582703 },\n];\n\nconst apartments = [\n  {\n    id: 1,\n    title: 'Вільямса, 9',\n    image:\n      'https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 2,\n    title: 'Ломоносова, 38',\n    image:\n      'https://images.pexels.com/photos/1643383/pexels-photo-1643383.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 3,\n    title: 'Касьяна, 20',\n    image:\n      'https://images.pexels.com/photos/667838/pexels-photo-667838.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 4,\n    title: 'Мейтуса, 10',\n    image:\n      'https://images.pexels.com/photos/245208/pexels-photo-245208.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 5,\n    title: 'Луценка, 11',\n    image:\n      'https://images.pexels.com/photos/259962/pexels-photo-259962.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 6,\n    title: 'Васильківська, 11',\n    image:\n      'https://images.pexels.com/photos/439227/pexels-photo-439227.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 7,\n    title: 'Васильківська, 34',\n    image:\n      'https://images.pexels.com/photos/1669799/pexels-photo-1669799.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 8,\n    title: 'Максимовича, 4',\n    image:\n      'https://images.pexels.com/photos/1571459/pexels-photo-1571459.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 9,\n    title: 'Васильківська, 53',\n    image:\n      'https://images.pexels.com/photos/1648771/pexels-photo-1648771.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 10,\n    title: 'Вільямса, 11',\n    image:\n      'https://images.pexels.com/photos/271743/pexels-photo-271743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n  {\n    id: 11,\n    title: 'Конєва, 10',\n    image:\n      'https://images.pexels.com/photos/265004/pexels-photo-265004.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1',\n    description:\n      'Lorem ipsum dolor, sit amet consectetur adipisicing elit. Sint tempore quidem aliquam, vero itaque architecto qui minima hic saepe placeat?',\n  },\n];\n\nexport { points, apartments };\n","import { points, apartments } from './points';\n\nexport class ModelObjectHandler {\n  initModel = () => {\n    if (JSON.parse(localStorage.getItem('points')) === null) {\n      localStorage.setItem('points', JSON.stringify(points));\n    }\n\n    if (JSON.parse(localStorage.getItem('apartments')) === null) {\n      localStorage.setItem('apartments', JSON.stringify(apartments));\n    }\n  };\n\n  getAllPoints = () => {\n    return JSON.parse(localStorage.getItem('points'));\n  };\n\n  getLastPointId = () => {\n    const pnts = JSON.parse(localStorage.getItem('points'));\n    return pnts[pnts.length - 1].id;\n  };\n\n  getAllApartments = () => {\n    return JSON.parse(localStorage.getItem('apartments'));\n  };\n\n  getApartmentById = id => {\n    const aparts = JSON.parse(localStorage.getItem('apartments'));\n    return [aparts[aparts.findIndex(apartment => apartment.id === id)]];\n  };\n\n  getApartmentsByIdArr = idArr => {\n    return JSON.parse(localStorage.getItem('apartments')).filter(apartment =>\n      idArr.includes(apartment.id)\n    );\n  };\n\n  getVisiblePointsId = rectangle =>\n    JSON.parse(localStorage.getItem('points'))\n      .filter(isInBounds(rectangle))\n      .map(getPointId);\n\n  addNewApartment = (id, lat, lng, title, image, description) => {\n    const currentPoints = JSON.parse(localStorage.getItem('points'));\n    const currentApartments = JSON.parse(localStorage.getItem('apartments'));\n\n    id += 1;\n\n    currentPoints.push({ id, lat, lng });\n    currentApartments.push({ id, title, image, description });\n\n    localStorage.setItem('points', JSON.stringify(currentPoints));\n    localStorage.setItem('apartments', JSON.stringify(currentApartments));\n  };\n}\n\nconst getPointId = point => point.id;\n\nconst isInBounds =\n  ({ south, north, west, east }) =>\n  ({ lat, lng }) =>\n    lng > west && lng < east && lat > south && lat < north;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _inherits;\nvar _setPrototypeOf = _interopRequireDefault(require(\"./_set_prototype_of\"));\nfunction _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n            value: subClass,\n            writable: true,\n            configurable: true\n        }\n    });\n    if (superClass) (0, _setPrototypeOf).default(subClass, superClass);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _slicedToArray;\nvar _arrayWithHoles = _interopRequireDefault(require(\"./_array_with_holes\"));\nvar _iterableToArray = _interopRequireDefault(require(\"./_iterable_to_array\"));\nvar _nonIterableRest = _interopRequireDefault(require(\"./_non_iterable_rest\"));\nvar _unsupportedIterableToArray = _interopRequireDefault(require(\"./_unsupported_iterable_to_array\"));\nfunction _slicedToArray(arr, i) {\n    return (0, _arrayWithHoles).default(arr) || (0, _iterableToArray).default(arr, i) || (0, _unsupportedIterableToArray).default(arr, i) || (0, _nonIterableRest).default();\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _toConsumableArray;\nvar _arrayWithoutHoles = _interopRequireDefault(require(\"./_array_without_holes\"));\nvar _iterableToArray = _interopRequireDefault(require(\"./_iterable_to_array\"));\nvar _nonIterableSpread = _interopRequireDefault(require(\"./_non_iterable_spread\"));\nvar _unsupportedIterableToArray = _interopRequireDefault(require(\"./_unsupported_iterable_to_array\"));\nfunction _toConsumableArray(arr) {\n    return (0, _arrayWithoutHoles).default(arr) || (0, _iterableToArray).default(arr) || (0, _unsupportedIterableToArray).default(arr) || (0, _nonIterableSpread).default();\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createSuper;\nvar _isNativeReflectConstruct = _interopRequireDefault(require(\"./_is_native_reflect_construct\"));\nvar _getPrototypeOf = _interopRequireDefault(require(\"./_get_prototype_of\"));\nvar _possibleConstructorReturn = _interopRequireDefault(require(\"./_possible_constructor_return\"));\nfunction _createSuper(Derived) {\n    var hasNativeReflectConstruct = (0, _isNativeReflectConstruct).default();\n    return function _createSuperInternal() {\n        var Super = (0, _getPrototypeOf).default(Derived), result;\n        if (hasNativeReflectConstruct) {\n            var NewTarget = (0, _getPrototypeOf).default(this).constructor;\n            result = Reflect.construct(Super, arguments, NewTarget);\n        } else {\n            result = Super.apply(this, arguments);\n        }\n        return (0, _possibleConstructorReturn).default(this, result);\n    };\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\nexport default function sortKD(ids, coords, nodeSize, left, right, depth) {\n    if (right - left <= nodeSize) return;\n\n    const m = (left + right) >> 1;\n\n    select(ids, coords, m, left, right, depth % 2);\n\n    sortKD(ids, coords, nodeSize, left, m - 1, depth + 1);\n    sortKD(ids, coords, nodeSize, m + 1, right, depth + 1);\n}\n\nfunction select(ids, coords, k, left, right, inc) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            const n = right - left + 1;\n            const m = k - left + 1;\n            const z = Math.log(n);\n            const s = 0.5 * Math.exp(2 * z / 3);\n            const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            select(ids, coords, k, newLeft, newRight, inc);\n        }\n\n        const t = coords[2 * k + inc];\n        let i = left;\n        let j = right;\n\n        swapItem(ids, coords, left, k);\n        if (coords[2 * right + inc] > t) swapItem(ids, coords, left, right);\n\n        while (i < j) {\n            swapItem(ids, coords, i, j);\n            i++;\n            j--;\n            while (coords[2 * i + inc] < t) i++;\n            while (coords[2 * j + inc] > t) j--;\n        }\n\n        if (coords[2 * left + inc] === t) swapItem(ids, coords, left, j);\n        else {\n            j++;\n            swapItem(ids, coords, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swapItem(ids, coords, i, j) {\n    swap(ids, i, j);\n    swap(coords, 2 * i, 2 * j);\n    swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n","\nexport default function range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    let x, y;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                x = coords[2 * i];\n                y = coords[2 * i + 1];\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        x = coords[2 * m];\n        y = coords[2 * m + 1];\n\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? minX <= x : minY <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? maxX >= x : maxY >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n","\nexport default function within(ids, coords, qx, qy, r, nodeSize) {\n    const stack = [0, ids.length - 1, 0];\n    const result = [];\n    const r2 = r * r;\n\n    while (stack.length) {\n        const axis = stack.pop();\n        const right = stack.pop();\n        const left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (let i = left; i <= right; i++) {\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) result.push(ids[i]);\n            }\n            continue;\n        }\n\n        const m = Math.floor((left + right) / 2);\n\n        const x = coords[2 * m];\n        const y = coords[2 * m + 1];\n\n        if (sqDist(x, y, qx, qy) <= r2) result.push(ids[m]);\n\n        const nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction sqDist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","\nimport sort from './sort';\nimport range from './range';\nimport within from './within';\n\nconst defaultGetX = p => p[0];\nconst defaultGetY = p => p[1];\n\nexport default class KDBush {\n    constructor(points, getX = defaultGetX, getY = defaultGetY, nodeSize = 64, ArrayType = Float64Array) {\n        this.nodeSize = nodeSize;\n        this.points = points;\n\n        const IndexArrayType = points.length < 65536 ? Uint16Array : Uint32Array;\n\n        const ids = this.ids = new IndexArrayType(points.length);\n        const coords = this.coords = new ArrayType(points.length * 2);\n\n        for (let i = 0; i < points.length; i++) {\n            ids[i] = i;\n            coords[2 * i] = getX(points[i]);\n            coords[2 * i + 1] = getY(points[i]);\n        }\n\n        sort(ids, coords, nodeSize, 0, ids.length - 1, 0);\n    }\n\n    range(minX, minY, maxX, maxY) {\n        return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\n    }\n\n    within(x, y, r) {\n        return within(this.ids, this.coords, x, y, r, this.nodeSize);\n    }\n}\n","\nimport KDBush from 'kdbush';\n\nconst defaultOptions = {\n    minZoom: 0,   // min zoom to generate clusters on\n    maxZoom: 16,  // max zoom level to cluster the points on\n    minPoints: 2, // minimum points to form a cluster\n    radius: 40,   // cluster radius in pixels\n    extent: 512,  // tile extent (radius is calculated relative to it)\n    nodeSize: 64, // size of the KD-tree leaf node, affects performance\n    log: false,   // whether to log timing info\n\n    // whether to generate numeric ids for input features (in vector tiles)\n    generateId: false,\n\n    // a reduce function for calculating custom cluster properties\n    reduce: null, // (accumulated, props) => { accumulated.sum += props.sum; }\n\n    // properties to use for individual points when running the reducer\n    map: props => props // props => ({sum: props.my_value})\n};\n\nconst fround = Math.fround || (tmp => ((x) => { tmp[0] = +x; return tmp[0]; }))(new Float32Array(1));\n\nexport default class Supercluster {\n    constructor(options) {\n        this.options = extend(Object.create(defaultOptions), options);\n        this.trees = new Array(this.options.maxZoom + 1);\n    }\n\n    load(points) {\n        const {log, minZoom, maxZoom, nodeSize} = this.options;\n\n        if (log) console.time('total time');\n\n        const timerId = `prepare ${  points.length  } points`;\n        if (log) console.time(timerId);\n\n        this.points = points;\n\n        // generate a cluster object for each point and index input points into a KD-tree\n        let clusters = [];\n        for (let i = 0; i < points.length; i++) {\n            if (!points[i].geometry) continue;\n            clusters.push(createPointCluster(points[i], i));\n        }\n        this.trees[maxZoom + 1] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n\n        if (log) console.timeEnd(timerId);\n\n        // cluster points on max zoom, then cluster the results on previous zoom, etc.;\n        // results in a cluster hierarchy across zoom levels\n        for (let z = maxZoom; z >= minZoom; z--) {\n            const now = +Date.now();\n\n            // create a new set of clusters for the zoom and index them with a KD-tree\n            clusters = this._cluster(clusters, z);\n            this.trees[z] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n\n            if (log) console.log('z%d: %d clusters in %dms', z, clusters.length, +Date.now() - now);\n        }\n\n        if (log) console.timeEnd('total time');\n\n        return this;\n    }\n\n    getClusters(bbox, zoom) {\n        let minLng = ((bbox[0] + 180) % 360 + 360) % 360 - 180;\n        const minLat = Math.max(-90, Math.min(90, bbox[1]));\n        let maxLng = bbox[2] === 180 ? 180 : ((bbox[2] + 180) % 360 + 360) % 360 - 180;\n        const maxLat = Math.max(-90, Math.min(90, bbox[3]));\n\n        if (bbox[2] - bbox[0] >= 360) {\n            minLng = -180;\n            maxLng = 180;\n        } else if (minLng > maxLng) {\n            const easternHem = this.getClusters([minLng, minLat, 180, maxLat], zoom);\n            const westernHem = this.getClusters([-180, minLat, maxLng, maxLat], zoom);\n            return easternHem.concat(westernHem);\n        }\n\n        const tree = this.trees[this._limitZoom(zoom)];\n        const ids = tree.range(lngX(minLng), latY(maxLat), lngX(maxLng), latY(minLat));\n        const clusters = [];\n        for (const id of ids) {\n            const c = tree.points[id];\n            clusters.push(c.numPoints ? getClusterJSON(c) : this.points[c.index]);\n        }\n        return clusters;\n    }\n\n    getChildren(clusterId) {\n        const originId = this._getOriginId(clusterId);\n        const originZoom = this._getOriginZoom(clusterId);\n        const errorMsg = 'No cluster with the specified id.';\n\n        const index = this.trees[originZoom];\n        if (!index) throw new Error(errorMsg);\n\n        const origin = index.points[originId];\n        if (!origin) throw new Error(errorMsg);\n\n        const r = this.options.radius / (this.options.extent * Math.pow(2, originZoom - 1));\n        const ids = index.within(origin.x, origin.y, r);\n        const children = [];\n        for (const id of ids) {\n            const c = index.points[id];\n            if (c.parentId === clusterId) {\n                children.push(c.numPoints ? getClusterJSON(c) : this.points[c.index]);\n            }\n        }\n\n        if (children.length === 0) throw new Error(errorMsg);\n\n        return children;\n    }\n\n    getLeaves(clusterId, limit, offset) {\n        limit = limit || 10;\n        offset = offset || 0;\n\n        const leaves = [];\n        this._appendLeaves(leaves, clusterId, limit, offset, 0);\n\n        return leaves;\n    }\n\n    getTile(z, x, y) {\n        const tree = this.trees[this._limitZoom(z)];\n        const z2 = Math.pow(2, z);\n        const {extent, radius} = this.options;\n        const p = radius / extent;\n        const top = (y - p) / z2;\n        const bottom = (y + 1 + p) / z2;\n\n        const tile = {\n            features: []\n        };\n\n        this._addTileFeatures(\n            tree.range((x - p) / z2, top, (x + 1 + p) / z2, bottom),\n            tree.points, x, y, z2, tile);\n\n        if (x === 0) {\n            this._addTileFeatures(\n                tree.range(1 - p / z2, top, 1, bottom),\n                tree.points, z2, y, z2, tile);\n        }\n        if (x === z2 - 1) {\n            this._addTileFeatures(\n                tree.range(0, top, p / z2, bottom),\n                tree.points, -1, y, z2, tile);\n        }\n\n        return tile.features.length ? tile : null;\n    }\n\n    getClusterExpansionZoom(clusterId) {\n        let expansionZoom = this._getOriginZoom(clusterId) - 1;\n        while (expansionZoom <= this.options.maxZoom) {\n            const children = this.getChildren(clusterId);\n            expansionZoom++;\n            if (children.length !== 1) break;\n            clusterId = children[0].properties.cluster_id;\n        }\n        return expansionZoom;\n    }\n\n    _appendLeaves(result, clusterId, limit, offset, skipped) {\n        const children = this.getChildren(clusterId);\n\n        for (const child of children) {\n            const props = child.properties;\n\n            if (props && props.cluster) {\n                if (skipped + props.point_count <= offset) {\n                    // skip the whole cluster\n                    skipped += props.point_count;\n                } else {\n                    // enter the cluster\n                    skipped = this._appendLeaves(result, props.cluster_id, limit, offset, skipped);\n                    // exit the cluster\n                }\n            } else if (skipped < offset) {\n                // skip a single point\n                skipped++;\n            } else {\n                // add a single point\n                result.push(child);\n            }\n            if (result.length === limit) break;\n        }\n\n        return skipped;\n    }\n\n    _addTileFeatures(ids, points, x, y, z2, tile) {\n        for (const i of ids) {\n            const c = points[i];\n            const isCluster = c.numPoints;\n\n            let tags, px, py;\n            if (isCluster) {\n                tags = getClusterProperties(c);\n                px = c.x;\n                py = c.y;\n            } else {\n                const p = this.points[c.index];\n                tags = p.properties;\n                px = lngX(p.geometry.coordinates[0]);\n                py = latY(p.geometry.coordinates[1]);\n            }\n\n            const f = {\n                type: 1,\n                geometry: [[\n                    Math.round(this.options.extent * (px * z2 - x)),\n                    Math.round(this.options.extent * (py * z2 - y))\n                ]],\n                tags\n            };\n\n            // assign id\n            let id;\n            if (isCluster) {\n                id = c.id;\n            } else if (this.options.generateId) {\n                // optionally generate id\n                id = c.index;\n            } else if (this.points[c.index].id) {\n                // keep id if already assigned\n                id = this.points[c.index].id;\n            }\n\n            if (id !== undefined) f.id = id;\n\n            tile.features.push(f);\n        }\n    }\n\n    _limitZoom(z) {\n        return Math.max(this.options.minZoom, Math.min(Math.floor(+z), this.options.maxZoom + 1));\n    }\n\n    _cluster(points, zoom) {\n        const clusters = [];\n        const {radius, extent, reduce, minPoints} = this.options;\n        const r = radius / (extent * Math.pow(2, zoom));\n\n        // loop through each point\n        for (let i = 0; i < points.length; i++) {\n            const p = points[i];\n            // if we've already visited the point at this zoom level, skip it\n            if (p.zoom <= zoom) continue;\n            p.zoom = zoom;\n\n            // find all nearby points\n            const tree = this.trees[zoom + 1];\n            const neighborIds = tree.within(p.x, p.y, r);\n\n            const numPointsOrigin = p.numPoints || 1;\n            let numPoints = numPointsOrigin;\n\n            // count the number of points in a potential cluster\n            for (const neighborId of neighborIds) {\n                const b = tree.points[neighborId];\n                // filter out neighbors that are already processed\n                if (b.zoom > zoom) numPoints += b.numPoints || 1;\n            }\n\n            // if there were neighbors to merge, and there are enough points to form a cluster\n            if (numPoints > numPointsOrigin && numPoints >= minPoints) {\n                let wx = p.x * numPointsOrigin;\n                let wy = p.y * numPointsOrigin;\n\n                let clusterProperties = reduce && numPointsOrigin > 1 ? this._map(p, true) : null;\n\n                // encode both zoom and point index on which the cluster originated -- offset by total length of features\n                const id = (i << 5) + (zoom + 1) + this.points.length;\n\n                for (const neighborId of neighborIds) {\n                    const b = tree.points[neighborId];\n\n                    if (b.zoom <= zoom) continue;\n                    b.zoom = zoom; // save the zoom (so it doesn't get processed twice)\n\n                    const numPoints2 = b.numPoints || 1;\n                    wx += b.x * numPoints2; // accumulate coordinates for calculating weighted center\n                    wy += b.y * numPoints2;\n\n                    b.parentId = id;\n\n                    if (reduce) {\n                        if (!clusterProperties) clusterProperties = this._map(p, true);\n                        reduce(clusterProperties, this._map(b));\n                    }\n                }\n\n                p.parentId = id;\n                clusters.push(createCluster(wx / numPoints, wy / numPoints, id, numPoints, clusterProperties));\n\n            } else { // left points as unclustered\n                clusters.push(p);\n\n                if (numPoints > 1) {\n                    for (const neighborId of neighborIds) {\n                        const b = tree.points[neighborId];\n                        if (b.zoom <= zoom) continue;\n                        b.zoom = zoom;\n                        clusters.push(b);\n                    }\n                }\n            }\n        }\n\n        return clusters;\n    }\n\n    // get index of the point from which the cluster originated\n    _getOriginId(clusterId) {\n        return (clusterId - this.points.length) >> 5;\n    }\n\n    // get zoom of the point from which the cluster originated\n    _getOriginZoom(clusterId) {\n        return (clusterId - this.points.length) % 32;\n    }\n\n    _map(point, clone) {\n        if (point.numPoints) {\n            return clone ? extend({}, point.properties) : point.properties;\n        }\n        const original = this.points[point.index].properties;\n        const result = this.options.map(original);\n        return clone && result === original ? extend({}, result) : result;\n    }\n}\n\nfunction createCluster(x, y, id, numPoints, properties) {\n    return {\n        x: fround(x), // weighted cluster center; round for consistency with Float32Array index\n        y: fround(y),\n        zoom: Infinity, // the last zoom the cluster was processed at\n        id, // encodes index of the first child of the cluster and its zoom level\n        parentId: -1, // parent cluster id\n        numPoints,\n        properties\n    };\n}\n\nfunction createPointCluster(p, id) {\n    const [x, y] = p.geometry.coordinates;\n    return {\n        x: fround(lngX(x)), // projected point coordinates\n        y: fround(latY(y)),\n        zoom: Infinity, // the last zoom the point was processed at\n        index: id, // index of the source feature in the original input array,\n        parentId: -1 // parent cluster id\n    };\n}\n\nfunction getClusterJSON(cluster) {\n    return {\n        type: 'Feature',\n        id: cluster.id,\n        properties: getClusterProperties(cluster),\n        geometry: {\n            type: 'Point',\n            coordinates: [xLng(cluster.x), yLat(cluster.y)]\n        }\n    };\n}\n\nfunction getClusterProperties(cluster) {\n    const count = cluster.numPoints;\n    const abbrev =\n        count >= 10000 ? `${Math.round(count / 1000)  }k` :\n        count >= 1000 ? `${Math.round(count / 100) / 10  }k` : count;\n    return extend(extend({}, cluster.properties), {\n        cluster: true,\n        cluster_id: cluster.id,\n        point_count: count,\n        point_count_abbreviated: abbrev\n    });\n}\n\n// longitude/latitude to spherical mercator in [0..1] range\nfunction lngX(lng) {\n    return lng / 360 + 0.5;\n}\nfunction latY(lat) {\n    const sin = Math.sin(lat * Math.PI / 180);\n    const y = (0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI);\n    return y < 0 ? 0 : y > 1 ? 1 : y;\n}\n\n// spherical mercator to longitude/latitude\nfunction xLng(x) {\n    return (x - 0.5) * 360;\n}\nfunction yLat(y) {\n    const y2 = (180 - y * 360) * Math.PI / 180;\n    return 360 * Math.atan(Math.exp(y2)) / Math.PI - 90;\n}\n\nfunction extend(dest, src) {\n    for (const id in src) dest[id] = src[id];\n    return dest;\n}\n\nfunction getX(p) {\n    return p.x;\n}\nfunction getY(p) {\n    return p.y;\n}\n",null,"/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface ClusterOptions {\n  position?: google.maps.LatLng | google.maps.LatLngLiteral;\n  markers?: google.maps.Marker[];\n}\n\nexport class Cluster {\n  public marker: google.maps.Marker;\n  public readonly markers?: google.maps.Marker[];\n  protected _position: google.maps.LatLng;\n\n  constructor({ markers, position }: ClusterOptions) {\n    this.markers = markers;\n\n    if (position) {\n      if (position instanceof google.maps.LatLng) {\n        this._position = position;\n      } else {\n        this._position = new google.maps.LatLng(position);\n      }\n    }\n  }\n\n  public get bounds(): google.maps.LatLngBounds | undefined {\n    if (this.markers.length === 0 && !this._position) {\n      return undefined;\n    }\n\n    return this.markers.reduce((bounds, marker) => {\n      return bounds.extend(marker.getPosition());\n    }, new google.maps.LatLngBounds(this._position, this._position));\n  }\n\n  public get position(): google.maps.LatLng {\n    return this._position || this.bounds.getCenter();\n  }\n\n  /**\n   * Get the count of **visible** markers.\n   */\n  public get count(): number {\n    return this.markers.filter((m: google.maps.Marker) => m.getVisible())\n      .length;\n  }\n\n  /**\n   * Add a marker to the cluster.\n   */\n  public push(marker: google.maps.Marker): void {\n    this.markers.push(marker);\n  }\n\n  /**\n   * Cleanup references and remove marker from map.\n   */\n  public delete(): void {\n    if (this.marker) {\n      this.marker.setMap(null);\n      delete this.marker;\n    }\n    this.markers.length = 0;\n  }\n}\n","/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Cluster } from \"../cluster\";\nimport { filterMarkersToPaddedViewport } from \"./utils\";\n\nexport interface AlgorithmInput {\n  /**\n   * The map containing the markers and clusters.\n   */\n  map: google.maps.Map;\n  /**\n   * An array of markers to be clustered.\n   *\n   * There are some specific edge cases to be aware of including the following:\n   * * Markers that are not visible.\n   */\n  markers: google.maps.Marker[];\n  /**\n   * The `mapCanvasProjection` enables easy conversion from lat/lng to pixel.\n   *\n   * @see [MapCanvasProjection](https://developers.google.com/maps/documentation/javascript/reference/overlay-view#MapCanvasProjection)\n   */\n  mapCanvasProjection: google.maps.MapCanvasProjection;\n}\n\nexport interface AlgorithmOutput {\n  /**\n   * The clusters returned based upon the {@link AlgorithmInput}.\n   */\n  clusters: Cluster[];\n  /**\n   * A boolean flag indicating that the clusters have not changed.\n   */\n  changed?: boolean;\n}\n\nexport interface Algorithm {\n  /**\n   * Calculates an array of {@link Cluster}.\n   */\n  calculate: ({ markers, map }: AlgorithmInput) => AlgorithmOutput;\n}\n\nexport interface AlgorithmOptions {\n  maxZoom?: number;\n}\n/**\n * @hidden\n */\nexport abstract class AbstractAlgorithm implements Algorithm {\n  protected maxZoom: number;\n\n  constructor({ maxZoom = 16 }: AlgorithmOptions) {\n    this.maxZoom = maxZoom;\n  }\n  /**\n   * Helper function to bypass clustering based upon some map state such as\n   * zoom, number of markers, etc.\n   *\n   * ```typescript\n   *  cluster({markers, map}: AlgorithmInput): Cluster[] {\n   *    if (shouldBypassClustering(map)) {\n   *      return this.noop({markers, map})\n   *    }\n   * }\n   * ```\n   */\n  protected noop({ markers }: AlgorithmInput): Cluster[] {\n    return noop(markers);\n  }\n  /**\n   * Calculates an array of {@link Cluster}. Calculate is separate from\n   * {@link cluster} as it does preprocessing on the markers such as filtering\n   * based upon the viewport as in {@link AbstractViewportAlgorithm}. Caching\n   * and other optimizations can also be done here.\n   */\n  public abstract calculate({ markers, map }: AlgorithmInput): AlgorithmOutput;\n\n  /**\n   * Clusters the markers and called from {@link calculate}.\n   */\n  protected abstract cluster({ markers, map }: AlgorithmInput): Cluster[];\n}\n\n/**\n * @hidden\n */\nexport interface ViewportAlgorithmOptions extends AlgorithmOptions {\n  /**\n   * The number of pixels to extend beyond the viewport bounds when filtering\n   * markers prior to clustering.\n   */\n  viewportPadding?: number;\n}\n\n/**\n * Abstract viewport algorithm proves a class to filter markers by a padded\n * viewport. This is a common optimization.\n *\n * @hidden\n */\nexport abstract class AbstractViewportAlgorithm extends AbstractAlgorithm {\n  protected viewportPadding = 60;\n\n  constructor({ viewportPadding = 60, ...options }: ViewportAlgorithmOptions) {\n    super(options);\n    this.viewportPadding = viewportPadding;\n  }\n  public calculate({\n    markers,\n    map,\n    mapCanvasProjection,\n  }: AlgorithmInput): AlgorithmOutput {\n    if (map.getZoom() >= this.maxZoom) {\n      return {\n        clusters: this.noop({\n          markers,\n          map,\n          mapCanvasProjection,\n        }),\n        changed: false,\n      };\n    }\n\n    return {\n      clusters: this.cluster({\n        markers: filterMarkersToPaddedViewport(\n          map,\n          mapCanvasProjection,\n          markers,\n          this.viewportPadding\n        ),\n        map,\n        mapCanvasProjection,\n      }),\n    };\n  }\n  protected abstract cluster({ markers, map }: AlgorithmInput): Cluster[];\n}\n\n/**\n * @hidden\n */\nexport const noop = (markers: google.maps.Marker[]): Cluster[] => {\n  const clusters = markers.map(\n    (marker) =>\n      new Cluster({\n        position: marker.getPosition(),\n        markers: [marker],\n      })\n  );\n  return clusters;\n};\n","/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AbstractAlgorithm, AlgorithmInput, AlgorithmOutput } from \"./core\";\nimport SuperCluster, { ClusterFeature } from \"supercluster\";\n\nimport { Cluster } from \"../cluster\";\nimport equal from \"fast-deep-equal\";\n\nexport type SuperClusterOptions = SuperCluster.Options<\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  { [name: string]: any },\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  { [name: string]: any }\n>;\n\n/**\n * A very fast JavaScript algorithm for geospatial point clustering using KD trees.\n *\n * @see https://www.npmjs.com/package/supercluster for more information on options.\n */\nexport class SuperClusterAlgorithm extends AbstractAlgorithm {\n  protected superCluster: SuperCluster;\n  protected markers: google.maps.Marker[];\n  protected clusters: Cluster[];\n  protected state: { zoom: number };\n\n  constructor({ maxZoom, radius = 60, ...options }: SuperClusterOptions) {\n    super({ maxZoom });\n\n    this.superCluster = new SuperCluster({\n      maxZoom: this.maxZoom,\n      radius,\n      ...options,\n    });\n\n    this.state = { zoom: null };\n  }\n  public calculate(input: AlgorithmInput): AlgorithmOutput {\n    let changed = false;\n\n    if (!equal(input.markers, this.markers)) {\n      changed = true;\n      // TODO use proxy to avoid copy?\n      this.markers = [...input.markers];\n\n      const points = this.markers.map((marker) => {\n        return {\n          type: \"Feature\" as const,\n          geometry: {\n            type: \"Point\" as const,\n            coordinates: [\n              marker.getPosition().lng(),\n              marker.getPosition().lat(),\n            ],\n          },\n          properties: { marker },\n        };\n      });\n\n      this.superCluster.load(points);\n    }\n\n    const state = { zoom: input.map.getZoom() };\n\n    if (!changed) {\n      if (this.state.zoom > this.maxZoom && state.zoom > this.maxZoom) {\n        // still beyond maxZoom, no change\n      } else {\n        changed = changed || !equal(this.state, state);\n      }\n    }\n\n    this.state = state;\n\n    if (changed) {\n      this.clusters = this.cluster(input);\n    }\n\n    return { clusters: this.clusters, changed };\n  }\n\n  public cluster({ map }: AlgorithmInput): Cluster[] {\n    return this.superCluster\n      .getClusters([-180, -90, 180, 90], Math.round(map.getZoom()))\n      .map(this.transformCluster.bind(this));\n  }\n\n  protected transformCluster({\n    geometry: {\n      coordinates: [lng, lat],\n    },\n    properties,\n  }: ClusterFeature<{ marker: google.maps.Marker }>): Cluster {\n    if (properties.cluster) {\n      return new Cluster({\n        markers: this.superCluster\n          .getLeaves(properties.cluster_id, Infinity)\n          .map((leaf) => leaf.properties.marker),\n        position: new google.maps.LatLng({ lat, lng }),\n      });\n    } else {\n      const marker = properties.marker;\n\n      return new Cluster({\n        markers: [marker],\n        position: marker.getPosition(),\n      });\n    }\n  }\n}\n","/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Cluster } from \"./cluster\";\n\n/**\n * Provides statistics on all clusters in the current render cycle for use in {@link Renderer.render}.\n */\nexport class ClusterStats {\n  public readonly markers: { sum: number };\n  public readonly clusters: {\n    count: number;\n    markers: {\n      mean: number;\n      sum: number;\n      min: number;\n      max: number;\n    };\n  };\n\n  constructor(markers: google.maps.Marker[], clusters: Cluster[]) {\n    this.markers = { sum: markers.length };\n\n    const clusterMarkerCounts = clusters.map((a) => a.count);\n    const clusterMarkerSum = clusterMarkerCounts.reduce((a, b) => a + b, 0);\n\n    this.clusters = {\n      count: clusters.length,\n      markers: {\n        mean: clusterMarkerSum / clusters.length,\n        sum: clusterMarkerSum,\n        min: Math.min(...clusterMarkerCounts),\n        max: Math.max(...clusterMarkerCounts),\n      },\n    };\n  }\n}\n\nexport interface Renderer {\n  /**\n   * Turn a {@link Cluster} into a `google.maps.Marker`.\n   *\n   * Below is a simple example to create a marker with the number of markers in the cluster as a label.\n   *\n   * ```typescript\n   * return new google.maps.Marker({\n   *   position,\n   *   label: String(markers.length),\n   * });\n   * ```\n   */\n  render(cluster: Cluster, stats: ClusterStats): google.maps.Marker;\n}\n\nexport class DefaultRenderer implements Renderer {\n  /**\n   * The default render function for the library used by {@link MarkerClusterer}.\n   *\n   * Currently set to use the following:\n   *\n   * ```typescript\n   * // change color if this cluster has more markers than the mean cluster\n   * const color =\n   *   count > Math.max(10, stats.clusters.markers.mean)\n   *     ? \"#ff0000\"\n   *     : \"#0000ff\";\n   *\n   * // create svg url with fill color\n   * const svg = window.btoa(`\n   * <svg fill=\"${color}\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 240 240\">\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".6\" r=\"70\" />\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".3\" r=\"90\" />\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".2\" r=\"110\" />\n   *   <circle cx=\"120\" cy=\"120\" opacity=\".1\" r=\"130\" />\n   * </svg>`);\n   *\n   * // create marker using svg icon\n   * return new google.maps.Marker({\n   *   position,\n   *   icon: {\n   *     url: `data:image/svg+xml;base64,${svg}`,\n   *     scaledSize: new google.maps.Size(45, 45),\n   *   },\n   *   label: {\n   *     text: String(count),\n   *     color: \"rgba(255,255,255,0.9)\",\n   *     fontSize: \"12px\",\n   *   },\n   *   // adjust zIndex to be above other markers\n   *   zIndex: 1000 + count,\n   * });\n   * ```\n   */\n  public render(\n    { count, position }: Cluster,\n    stats: ClusterStats\n  ): google.maps.Marker {\n    // change color if this cluster has more markers than the mean cluster\n    const color =\n      count > Math.max(10, stats.clusters.markers.mean) ? \"#ff0000\" : \"#0000ff\";\n\n    // create svg url with fill color\n    const svg = window.btoa(`\n  <svg fill=\"${color}\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 240 240\">\n    <circle cx=\"120\" cy=\"120\" opacity=\".6\" r=\"70\" />\n    <circle cx=\"120\" cy=\"120\" opacity=\".3\" r=\"90\" />\n    <circle cx=\"120\" cy=\"120\" opacity=\".2\" r=\"110\" />\n  </svg>`);\n\n    // create marker using svg icon\n    return new google.maps.Marker({\n      position,\n      icon: {\n        url: `data:image/svg+xml;base64,${svg}`,\n        scaledSize: new google.maps.Size(45, 45),\n      },\n      label: {\n        text: String(count),\n        color: \"rgba(255,255,255,0.9)\",\n        fontSize: \"12px\",\n      },\n      title: `Cluster of ${count} markers`,\n      // adjust zIndex to be above other markers\n      zIndex: Number(google.maps.Marker.MAX_ZINDEX) + count,\n    });\n  }\n}\n","/**\n * Copyright 2019 Google LLC. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface OverlayViewSafe extends google.maps.OverlayView {}\n\n/**\n * Extends an object's prototype by another's.\n *\n * @param type1 The Type to be extended.\n * @param type2 The Type to extend with.\n * @ignore\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction extend(type1: any, type2: any): void {\n  /* istanbul ignore next */\n  // eslint-disable-next-line prefer-const\n  for (let property in type2.prototype) {\n    type1.prototype[property] = type2.prototype[property];\n  }\n}\n\n/**\n * @ignore\n */\nexport class OverlayViewSafe {\n  constructor() {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    extend(OverlayViewSafe, google.maps.OverlayView);\n  }\n}\n","/**\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Algorithm, SuperClusterAlgorithm } from \"./algorithms\";\nimport { ClusterStats, DefaultRenderer, Renderer } from \"./renderer\";\n\nimport { Cluster } from \"./cluster\";\nimport { OverlayViewSafe } from \"./overlay-view-safe\";\n\nexport type onClusterClickHandler = (\n  event: google.maps.MapMouseEvent,\n  cluster: Cluster,\n  map: google.maps.Map\n) => void;\nexport interface MarkerClustererOptions {\n  markers?: google.maps.Marker[];\n  /**\n   * An algorithm to cluster markers. Default is {@link SuperClusterAlgorithm}. Must\n   * provide a `calculate` method accepting {@link AlgorithmInput} and returning\n   * an array of {@link Cluster}.\n   */\n  algorithm?: Algorithm;\n  map?: google.maps.Map | null;\n  /**\n   * An object that converts a {@link Cluster} into a `google.maps.Marker`.\n   * Default is {@link DefaultRenderer}.\n   */\n  renderer?: Renderer;\n  onClusterClick?: onClusterClickHandler;\n}\n\nexport enum MarkerClustererEvents {\n  CLUSTERING_BEGIN = \"clusteringbegin\",\n  CLUSTERING_END = \"clusteringend\",\n  CLUSTER_CLICK = \"click\",\n}\n\nexport const defaultOnClusterClickHandler: onClusterClickHandler = (\n  _: google.maps.MapMouseEvent,\n  cluster: Cluster,\n  map: google.maps.Map\n): void => {\n  map.fitBounds(cluster.bounds);\n};\n/**\n * MarkerClusterer creates and manages per-zoom-level clusters for large amounts\n * of markers. See {@link MarkerClustererOptions} for more details.\n *\n */\nexport class MarkerClusterer extends OverlayViewSafe {\n  /** @see {@link MarkerClustererOptions.onClusterClick} */\n  public onClusterClick: onClusterClickHandler;\n  /** @see {@link MarkerClustererOptions.algorithm} */\n  protected algorithm: Algorithm;\n  protected clusters: Cluster[];\n  protected markers: google.maps.Marker[];\n  /** @see {@link MarkerClustererOptions.renderer} */\n  protected renderer: Renderer;\n  /** @see {@link MarkerClustererOptions.map} */\n  protected map: google.maps.Map | null;\n  /** @see {@link MarkerClustererOptions.maxZoom} */\n  protected idleListener: google.maps.MapsEventListener;\n\n  constructor({\n    map,\n    markers = [],\n    algorithm = new SuperClusterAlgorithm({}),\n    renderer = new DefaultRenderer(),\n    onClusterClick = defaultOnClusterClickHandler,\n  }: MarkerClustererOptions) {\n    super();\n    this.markers = [...markers];\n    this.clusters = [];\n\n    this.algorithm = algorithm;\n    this.renderer = renderer;\n\n    this.onClusterClick = onClusterClick;\n\n    if (map) {\n      this.setMap(map);\n    }\n  }\n\n  public addMarker(marker: google.maps.Marker, noDraw?: boolean): void {\n    if (this.markers.includes(marker)) {\n      return;\n    }\n\n    this.markers.push(marker);\n    if (!noDraw) {\n      this.render();\n    }\n  }\n\n  public addMarkers(markers: google.maps.Marker[], noDraw?: boolean): void {\n    markers.forEach((marker) => {\n      this.addMarker(marker, true);\n    });\n\n    if (!noDraw) {\n      this.render();\n    }\n  }\n\n  public removeMarker(marker: google.maps.Marker, noDraw?: boolean): boolean {\n    const index = this.markers.indexOf(marker);\n\n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n\n    marker.setMap(null);\n    this.markers.splice(index, 1); // Remove the marker from the list of managed markers\n\n    if (!noDraw) {\n      this.render();\n    }\n\n    return true;\n  }\n\n  public removeMarkers(\n    markers: google.maps.Marker[],\n    noDraw?: boolean\n  ): boolean {\n    let removed = false;\n\n    markers.forEach((marker) => {\n      removed = this.removeMarker(marker, true) || removed;\n    });\n\n    if (removed && !noDraw) {\n      this.render();\n    }\n\n    return removed;\n  }\n\n  public clearMarkers(noDraw?: boolean): void {\n    this.markers.length = 0;\n\n    if (!noDraw) {\n      this.render();\n    }\n  }\n\n  /**\n   * Recalculates and draws all the marker clusters.\n   */\n  public render(): void {\n    const map = this.getMap();\n    if (map instanceof google.maps.Map && this.getProjection()) {\n      google.maps.event.trigger(\n        this,\n        MarkerClustererEvents.CLUSTERING_BEGIN,\n        this\n      );\n      const { clusters, changed } = this.algorithm.calculate({\n        markers: this.markers,\n        map,\n        mapCanvasProjection: this.getProjection(),\n      });\n\n      // allow algorithms to return flag on whether the clusters/markers have changed\n      if (changed || changed == undefined) {\n        // reset visibility of markers and clusters\n        this.reset();\n\n        // store new clusters\n        this.clusters = clusters;\n\n        this.renderClusters();\n      }\n      google.maps.event.trigger(\n        this,\n        MarkerClustererEvents.CLUSTERING_END,\n        this\n      );\n    }\n  }\n\n  public onAdd(): void {\n    this.idleListener = this.getMap().addListener(\n      \"idle\",\n      this.render.bind(this)\n    );\n    this.render();\n  }\n\n  public onRemove(): void {\n    google.maps.event.removeListener(this.idleListener);\n    this.reset();\n  }\n\n  protected reset(): void {\n    this.markers.forEach((marker) => marker.setMap(null));\n    this.clusters.forEach((cluster) => cluster.delete());\n    this.clusters = [];\n  }\n\n  protected renderClusters(): void {\n    // generate stats to pass to renderers\n    const stats = new ClusterStats(this.markers, this.clusters);\n    const map = this.getMap() as google.maps.Map;\n\n    this.clusters.forEach((cluster) => {\n      if (cluster.markers.length === 1) {\n        cluster.marker = cluster.markers[0];\n      } else {\n        cluster.marker = this.renderer.render(cluster, stats);\n\n        if (this.onClusterClick) {\n          cluster.marker.addListener(\n            \"click\",\n            /* istanbul ignore next */\n            (event: google.maps.MapMouseEvent) => {\n              google.maps.event.trigger(\n                this,\n                MarkerClustererEvents.CLUSTER_CLICK,\n                cluster\n              );\n              this.onClusterClick(event, cluster, map);\n            }\n          );\n        }\n      }\n\n      cluster.marker.setMap(map);\n    });\n  }\n}\n","import { MarkerClusterer } from '@googlemaps/markerclusterer';\n\nexport function createMap(container) {\n  const map = new google.maps.Map(container, {\n    zoom: 16,\n    center: { lat: 50.3864813, lng: 30.4610184 },\n    mapTypeControl: true,\n    mapTypeControlOptions: {\n      style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,\n      position: google.maps.ControlPosition.TOP_CENTER,\n    },\n    zoomControl: true,\n    zoomControlOptions: {\n      position: google.maps.ControlPosition.LEFT_CENTER,\n    },\n    scaleControl: true,\n    streetViewControl: true,\n    streetViewControlOptions: {\n      position: google.maps.ControlPosition.LEFT_TOP,\n    },\n    fullscreenControl: true,\n  });\n\n  const mapObservers = [];\n\n  const addPoints = points => {\n    const markers = points.map(({ id, lat, lng }) => {\n      const label = id.toString();\n\n      const marker = new google.maps.Marker({\n        position: { lat, lng },\n        label,\n      });\n\n      // вынести колл-бек из лисенера - дать понятное имя\n      // убрать querySelector (document) устранить выход из контекста\n      // 18 - константа зума: сделать константой с понятным именем \"масштаб крупный (уменьшеный)\"\n\n      marker.addListener('click', mapsMouseEvent => {\n        map.setZoom(18);\n        map.setCenter(marker.position);\n\n        const ApartByClickMarketEl = document.querySelector(\n          `[data-id='${marker.label}']`\n        );\n        ApartByClickMarketEl.scrollIntoView(true);\n      });\n\n      return marker;\n    });\n\n    new MarkerClusterer({ markers, map });\n  };\n\n  map.addListener('bounds_changed', boundsChanged);\n\n  setTimeout(() => {\n    console.log('get bounds', map.getBounds().toJSON());\n  }, 3000);\n\n  // разносить подписчиков по типу ивента на этапе подписки\n\n  function boundsChanged() {\n    for (let i = 0; i < mapObservers.length; i++) {\n      if (mapObservers[i].eventName === 'bounds_changed') {\n        mapObservers[i].listener(map.getBounds().toJSON());\n      }\n    }\n  }\n\n  const findNewPoints = request => {\n    return new Promise((resolve, reject) => {\n      var service = new google.maps.places.PlacesService(map);\n\n      service.findPlaceFromQuery(request, function (results, status) {\n        if (status === google.maps.places.PlacesServiceStatus.OK) {\n          createMarker(results[0]);\n          const newPointCoordinates = {\n            lat: results[0].geometry.location.lat(),\n            lng: results[0].geometry.location.lng(),\n          };\n\n          map.setCenter(results[0].geometry.location);\n          resolve(newPointCoordinates);\n        } else {\n          reject(status);\n        }\n      });\n\n      function createMarker(place) {\n        if (!place.geometry || !place.geometry.location) return;\n\n        const marker = new google.maps.Marker({\n          map,\n          position: place.geometry.location,\n        });\n      }\n    });\n  };\n\n  const zoomTo = zoom => {\n    map.setCenter({ lat: 50.3864813, lng: 30.4610184 });\n    map.setZoom(16);\n  };\n  function addEventListener(eventName, listener) {\n    mapObservers.push({ eventName, listener });\n  }\n\n  function removeEventListener(eventName, handler) {}\n\n  return {\n    addPoints,\n    findNewPoints,\n    zoomTo,\n    addEventListener,\n    removeEventListener,\n  };\n}\n\n//-----------------------------------\n","export class Gallery {\n  itemsGalleryEl = '';\n\n  constructor(root) {\n    this.itemsGalleryEl = document.querySelector(root);\n  }\n\n  renderItemsGallery = apartments => {\n    return apartments\n      .map(apart => {\n        return `\n    <li class=\"item\" data-id=\"${apart.id}\">\n    <img class=\"item__img\" src=\"${apart.image}\" alt=\"\" />\n    <div class=\"item__details\">\n      <h3 class=\"item__title\">${apart.title}</h3>\n      <p class=\"item__description\">${apart.description}</p>\n    </div>\n  </li>\n    `;\n      })\n      .join('');\n  };\n\n  showApartments = apartments => {\n    this.itemsGalleryEl.innerHTML = this.renderItemsGallery(apartments);\n  };\n\n  hideGallery = () => {\n    this.itemsGalleryEl.classList.add('invisible');\n  };\n\n  openGallery = () => {\n    this.itemsGalleryEl.classList.remove('invisible');\n  };\n}\n","export class Form {\n  rootEl = '';\n  ref = {\n    inputLat: '',\n    inputLng: '',\n    inputAddress: '',\n    inputImageLink: '',\n    inputDescripton: '',\n    buttonSearch: '',\n    stepAdd: [],\n  };\n\n  constructor(root) {\n    this.rootEl = document.querySelector(root);\n    this.hideForm();\n  }\n\n  renderFormToAddNewApartment = (\n    onSubmitSearch,\n    onSubmitAdd,\n    onSubmitClose\n  ) => {\n    this.rootEl.innerHTML = `\n<div class=\"form__wrap\">\n  <h3 class=\"form__title\">Додайте новий об'єкт</h3>\n  <form class=\"form__body\">\n  <input class=\"invisible\" type=\"text\" name=\"lat\"></input>\n    <input class=\"invisible\" type=\"text\" name=\"lng\"></input>\n    <label class=\"form__label\">\n      <span class=\"form__text\">Адреса</span>\n      <input class=\"form__field\" type=\"text\" name=\"title\" placeholder=\"назва вулиці, № будинку\" />\n    </label>\n\n    <label class=\"form__label\">\n      <span class=\"form__text invisible\" option=\"stepAdd\">Посилання на фото</span>\n      <input class=\"form__field invisible\" type=\"text\" name=\"image\" option=\"stepAdd\" placeholder=\"посилання на фото\" />\n    </label>\n\n    <label class=\"form__label \">\n      <span class=\"form__text invisible\" option=\"stepAdd\">Опис</span>\n      <textarea\n        class=\"form__field form__field--textarea invisible\"\n        name=\"description\"\n        option=\"stepAdd\"\n        placeholder=\"опис об'єкту\"\n        cols=\"30\"\n        rows=\"10\"\n      ></textarea>\n    </label>\n    <button class=\"form__button form__button--search\" option='step1'>Знайти адресу</button>\n    <button class=\"form__button form__button--save invisible\" type=\"submit\" option='stepAdd'>Додати</button>\n    <div class='form__error'>\n    <p class='error__text--not-found invisible'>Об'єкт не знайдено. Спробуйте ще</p>\n    <p class='error__text--empty-fields invisible'>Заповніть всі поля</p>\n        <button class=\"form__button form__button--close\">Відміна</button>\n    </div>\n\n  </form>\n</div>\n`;\n    this.ref.inputLat = this.rootEl.querySelector('input[name=\"lat\"]');\n    this.ref.inputLng = this.rootEl.querySelector('input[name=\"lng\"]');\n    this.ref.inputAddress = this.rootEl.querySelector('input[name=\"title\"]');\n    this.ref.inputImageLink = this.rootEl.querySelector('input[name=\"image\"]');\n    this.ref.inputDescripton = this.rootEl.querySelector(\n      '[name=\"description\"]'\n    );\n    this.ref.buttonSearch = this.rootEl.querySelector('.form__button--search');\n    this.ref.stepAdd = this.rootEl.querySelectorAll('[option=\"stepAdd\"]');\n\n    this.ref.inputAddress.addEventListener('focus', () => {\n      this.ref.inputAddress.value = '';\n      this.hideErrorSearch();\n    });\n\n    this.rootEl\n      .querySelector('.form__button--search')\n      .addEventListener('click', event => {\n        event.preventDefault();\n\n        const title = this.ref.inputAddress.value;\n        onSubmitSearch(title);\n      });\n\n    this.rootEl\n      .querySelector('.form__body')\n      .addEventListener('submit', event => {\n        event.preventDefault();\n        const lat = Number(event.currentTarget.elements['lat'].value);\n        const lng = Number(event.currentTarget.elements['lng'].value);\n\n        const title = event.currentTarget.elements['title'].value;\n        const image = event.currentTarget.elements['image'].value;\n        const description = event.currentTarget.elements['description'].value;\n\n        if (!title || !image || !description) {\n          this.showErrorSubmit();\n          setTimeout(this.hideErrorSubmit, 3000);\n          return;\n        }\n\n        onSubmitAdd({ lat, lng, title, image, description });\n      });\n\n    this.rootEl\n      .querySelector('.form__button--close')\n      .addEventListener('click', event => {\n        event.preventDefault();\n        onSubmitClose();\n      });\n  };\n\n  saveFoundedCoordinates = newPointCoordinates => {\n    this.ref.inputLat.value = newPointCoordinates.lat;\n    this.ref.inputLng.value = newPointCoordinates.lng;\n  };\n\n  openFormAfterSearch = () => {\n    this.ref.buttonSearch.classList.add('invisible');\n    this.ref.stepAdd.forEach(item => item.classList.remove('invisible'));\n  };\n\n  hideFormAfterSearch = () => {\n    this.ref.inputAddress.value = '';\n    this.ref.inputImageLink.value = '';\n    this.ref.inputDescripton.value = '';\n    this.ref.buttonSearch.classList.remove('invisible');\n    this.ref.stepAdd.forEach(item => item.classList.add('invisible'));\n  };\n\n  hideForm = () => {\n    this.rootEl.classList.add('invisible');\n  };\n\n  openForm = () => {\n    this.rootEl.classList.remove('invisible');\n  };\n\n  hideErrorSearch = () => {\n    this.rootEl\n      .querySelector('.error__text--not-found')\n      .classList.add('invisible');\n  };\n\n  showErrorSearch = () => {\n    this.rootEl\n      .querySelector('.error__text--not-found')\n      .classList.remove('invisible');\n  };\n\n  hideErrorSubmit = () => {\n    this.rootEl\n      .querySelector('.error__text--empty-fields')\n      .classList.add('invisible');\n  };\n\n  showErrorSubmit = () => {\n    this.rootEl\n      .querySelector('.error__text--empty-fields')\n      .classList.remove('invisible');\n  };\n}\n","export class App {\n  root = '';\n  rootMap = '';\n  rootGallery = '';\n  rootForm = '';\n\n  constructor(root) {\n    this.root = root;\n  }\n\n  initApp = () => {\n    const markupMap = `\n        <header class=\"container\">\n        <div class=\"header__wrap\">\n            <div class=\"header__logo\">\n                <a class=\"header__link\" href=\"https://www.gup.ua/\">\n                <img\n                    class=\"header__img\"\n                    src=\"https://www.gup.ua/images/logo-ua-razom.svg\"\n                    alt=\"Лого порталу GUP: сервіс прокату і оренди\"\n                /></a>\n            </div>\n            <div class=\"header__menu\">\n                <button type=\"button\" class=\"header__btn\" id=\"add-bulletin\">\n                <span>Здати в оренду</span>\n                </button>\n\n                <div class=\"header__login\">\n                <a class=\"login__link\">\n                <span class=\"login__text\">Увійти</span>\n                </a>\n                </div>\n            </div>\n        </div>\n        </header>\n\n        <div class=\"main container\">\n            <div class=\"main__map\">\n                <div id=\"map\"></div>\n            </div>\n            <div class=\"main__gallery\">\n                <div class=\"form__block\"></div>\n                <ul class=\"item__list\"></ul>\n            </div>\n        </div>\n\n        `;\n\n    document.querySelector(this.root).innerHTML = markupMap;\n  };\n\n  getRootMap() {\n    return document.getElementById('map');\n  }\n\n  getButtonToAddNewApartment() {\n    return document.querySelector('.header__btn');\n  }\n}\n","import { ModelObjectHandler } from './modelObjectsHandler';\nimport { createMap } from './createMap';\nimport { Gallery } from './createGallery';\nimport { Form } from './createForm';\nimport { App } from './app';\n\nfunction main() {\n  const model = new ModelObjectHandler();\n  model.initModel();\n\n  const app = new App('.app');\n  app.initApp();\n\n  const map = createMap(app.getRootMap());\n  const gallery = new Gallery('.item__list');\n  const form = new Form('.form__block');\n\n  const buttonToAddNewApartment = app.getButtonToAddNewApartment();\n  buttonToAddNewApartment.addEventListener('click', () => {\n    form.openForm();\n    gallery.hideGallery();\n  });\n\n  map.addPoints(model.getAllPoints());\n\n  function onBoundsChange(bounds) {\n    const visiblePoints = model.getVisiblePointsId(bounds);\n    gallery.showApartments(model.getApartmentsByIdArr(visiblePoints));\n  }\n\n  map.addEventListener('bounds_changed', onBoundsChange);\n\n  // отказаться от Буфера. каждому шагу свой зен. передавать коордтнаты в скрытое поле формы\n\n  const prepareNewApartmentForm = newPointCoordinates => {\n    form.saveFoundedCoordinates(newPointCoordinates);\n    form.openFormAfterSearch();\n  };\n\n  const searchOnMap = title => {\n    const fields = ['name', 'geometry'];\n    map\n      .findNewPoints({ fields, query: title })\n      .then(prepareNewApartmentForm)\n      .catch(form.showErrorSearch);\n  };\n\n  const submitNewApartment = ({ lat, lng, title, image, description }) => {\n    model.addNewApartment(\n      model.getLastPointId(),\n      lat,\n      lng,\n      title,\n      image,\n      description\n    );\n\n    form.hideFormAfterSearch();\n    form.hideForm();\n\n    gallery.openGallery();\n    gallery.showApartments(model.getApartmentById(model.getLastPointId()));\n\n    map.addPoints(model.getAllPoints());\n\n    setTimeout(() => map.zoomTo(8), 3000);\n  };\n\n  const cancelForm = () => {\n    form.hideFormAfterSearch();\n    form.hideForm();\n\n    gallery.openGallery();\n    map.zoomTo(8);\n  };\n\n  form.renderFormToAddNewApartment(searchOnMap, submitNewApartment, cancelForm);\n}\n\nwindow.main = main;\n//window.initMap = initMap;\n"],"names":["$c1b1a34fae3d3c27$var$setPrototypeOf","o1","p1","Object","setPrototypeOf","o","p","__proto__","defineProperty","module","exports","value","default","arr","Array","isArray","iter","Symbol","iterator","from","TypeError","minLen","$7a2c4c4c44c69707$var$_arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","test","obj","parcelRequire","__esModule","len","length","i","arr2","$f215c72f040a88cf$var$_arrayLikeToArray","Reflect","construct","sham","Proxy","Boolean","valueOf","e","$b9926a5835d271e3$var$getPrototypeOf","getPrototypeOf","self","$e17dad4ea3dafe1a$var$_typeOf","$e17dad4ea3dafe1a$var$_assertThisInitialized","$e17dad4ea3dafe1a$var$_interopRequireDefault","ReferenceError","$665014edacbfe17b$exports","instance","Constructor","$cec85eba0a352189$exports","key","enumerable","configurable","writable","$e560fa9b55d4e311$export$9f048bf86ee2e9d2","id","lat","lng","$e560fa9b55d4e311$export$749b2b9c8bfc5646","title","image","description","$1513330efcaa453c$export$510885540657d15b","ModelObjectHandler","$parcel$interopDefault","this","JSON","parse","localStorage","getItem","setItem","stringify","pnts","aparts","findIndex","apartment","idArr","filter","includes","rectangle","$1513330efcaa453c$var$isInBounds","map","$1513330efcaa453c$var$getPointId","currentPoints","currentApartments","push","point","param1","south","north","west","east","param","$74e7f8130373505f$var$_defineProperties","target","props","descriptor","$74e7f8130373505f$exports","protoProps","staticProps","$ae7f60fd48750bb9$exports","subClass","superClass","create","$ae7f60fd48750bb9$var$_setPrototypeOf","$111a013c31e2261e$exports","$111a013c31e2261e$var$_arrayWithHoles","$111a013c31e2261e$var$_iterableToArray","$111a013c31e2261e$var$_unsupportedIterableToArray","$111a013c31e2261e$var$_nonIterableRest","$111a013c31e2261e$var$_interopRequireDefault","$6195f07b5409ba15$exports","$6195f07b5409ba15$var$_arrayWithoutHoles","$6195f07b5409ba15$var$_iterableToArray","$6195f07b5409ba15$var$_unsupportedIterableToArray","$6195f07b5409ba15$var$_nonIterableSpread","$6195f07b5409ba15$var$_interopRequireDefault","$2059300b4b5a348b$exports","Derived","hasNativeReflectConstruct","$2059300b4b5a348b$var$_isNativeReflectConstruct","result","Super","$2059300b4b5a348b$var$_getPrototypeOf","NewTarget","arguments","apply","$2059300b4b5a348b$var$_possibleConstructorReturn","$2059300b4b5a348b$var$_interopRequireDefault","$fa5e60097c09a0bc$export$2e2bcd8739ae039","ids","coords","nodeSize","left","right","depth","m","$fa5e60097c09a0bc$var$select","k","inc","z","Math","log","s","exp","sd","sqrt","max","floor","min","t","j","$fa5e60097c09a0bc$var$swapItem","$fa5e60097c09a0bc$var$swap","tmp","$707caf98a87da6ce$export$2e2bcd8739ae039","minX","minY","maxX","maxY","x","y","stack","axis","pop","nextAxis","$9df6967c88af3876$export$2e2bcd8739ae039","qx","qy","r","r2","$9df6967c88af3876$var$sqDist","ax","ay","bx","by","dx","dy","$4231dcb8a90e6f41$exports","equal","a","b","keys","RegExp","source","flags","hasOwnProperty","$51a5234fa4b60097$var$defaultGetX","$51a5234fa4b60097$var$defaultGetY","$51a5234fa4b60097$export$2e2bcd8739ae039","KDBush","points","getX","getY","ArrayType","Float64Array","IndexArrayType","Uint16Array","Uint32Array","$74ae592c96ec3c1a$var$defaultOptions","minZoom","maxZoom","minPoints","radius","extent","generateId","reduce","$74ae592c96ec3c1a$var$fround","fround","Float32Array","$74ae592c96ec3c1a$export$2e2bcd8739ae039","Supercluster","options","$74ae592c96ec3c1a$var$extend","trees","_options","console","time","timerId","concat","_coordinates","clusters","geometry","coordinates","$74ae592c96ec3c1a$var$lngX","$74ae592c96ec3c1a$var$latY","zoom","Infinity","index","parentId","$74ae592c96ec3c1a$var$getX","$74ae592c96ec3c1a$var$getY","timeEnd","now","Date","_cluster","bbox","minLng","minLat","maxLng","maxLat","easternHem","getClusters","westernHem","tree","_limitZoom","range","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","c","numPoints","$74ae592c96ec3c1a$var$getClusterJSON","err","return","clusterId","originId","_getOriginId","originZoom","_getOriginZoom","errorMsg","Error","origin","pow","within","children","limit","offset","leaves","_appendLeaves","z2","top","bottom","tile","features","_addTileFeatures","expansionZoom","getChildren","properties","cluster_id","skipped","child","cluster","point_count","isCluster","tags","px","py","$74ae592c96ec3c1a$var$getClusterProperties","f","type","round","neighborIds","numPointsOrigin","neighborId","wx","wy","clusterProperties","_map","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","neighborId1","b1","numPoints2","$74ae592c96ec3c1a$var$createCluster","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","neighborId2","b2","clone","original","y2","PI","atan","count","abbrev","point_count_abbreviated","sin","dest","src","markers","position","Cluster","_position","bounds","marker","google","maps","LatLngBounds","getVisible","AbstractAlgorithm","SuperClusterAlgorithm","_a","_this","_radius","$3ba4e96e132ad9f5$var$__rest","assign","input","getPosition","superCluster","load","state","changed","getZoom","transformCluster","bind","_geometry","$3ba4e96e132ad9f5$export$57ed47926628b770","getLeaves","leaf","LatLng","$3ba4e96e132ad9f5$export$2deda6e6beba3286","ClusterStats","_Math","_Math1","clusterMarkerSum","clusterMarkerCounts","sum","stats","mean","svg","window","btoa","color","Marker","icon","label","text","String","$3ba4e96e132ad9f5$export$f87b0506a2cf0bc","property","type2","type1","$3ba4e96e132ad9f5$export$58bd9bb9fcf3dd4f","OverlayViewSafe","MarkerClusterer","_super","algorithm","setMap","noDraw","forEach","addMarker","render","indexOf","splice","removed","getMap","Map","getProjection","event","trigger","CLUSTERING_BEGIN","ref","calculate","reset","CLUSTERING_END","idleListener","addListener","removeListener","delete","_this1","$e87b96af3e0bc389$export$d49c9aa30b771d59","container","center","mapTypeControl","mapTypeControlOptions","style","MapTypeControlStyle","HORIZONTAL_BAR","ControlPosition","TOP_CENTER","zoomControl","zoomControlOptions","LEFT_CENTER","scaleControl","streetViewControl","streetViewControlOptions","LEFT_TOP","fullscreenControl","mapObservers","eventName","listener","getBounds","toJSON","setTimeout","addPoints","mapsMouseEvent","setZoom","setCenter","document","querySelector","scrollIntoView","findNewPoints","request","Promise","resolve","reject","places","PlacesService","findPlaceFromQuery","results","status","PlacesServiceStatus","OK","place","location","createMarker","newPointCoordinates","zoomTo","addEventListener","removeEventListener","handler","$ddd4e2c67603474d$export$ace63239d21d36e","Gallery","root","apartments","apart","join","itemsGalleryEl","innerHTML","renderItemsGallery","classList","add","remove","$5b161c8a8d80aadc$export$a7fed597f4b8afd8","Form","inputLat","inputLng","inputAddress","inputImageLink","inputDescripton","buttonSearch","stepAdd","onSubmitSearch","onSubmitAdd","onSubmitClose","rootEl","querySelectorAll","hideErrorSearch","preventDefault","Number","currentTarget","elements","showErrorSubmit","hideErrorSubmit","item","hideForm","$7e6258f3559d0f34$export$86fbec116b87613f","App","getElementById","main","model","initModel","app","initApp","getRootMap","gallery","form","getButtonToAddNewApartment","openForm","hideGallery","getAllPoints","visiblePoints","getVisiblePointsId","showApartments","getApartmentsByIdArr","prepareNewApartmentForm","saveFoundedCoordinates","openFormAfterSearch","renderFormToAddNewApartment","fields","query","then","catch","showErrorSearch","addNewApartment","getLastPointId","hideFormAfterSearch","openGallery","getApartmentById"],"version":3,"file":"index.83462a06.js.map"}